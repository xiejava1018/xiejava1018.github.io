<!DOCTYPE html>



  


<html class="theme-next muse use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">



  
  
    
    
  <script src="/lib/pace/pace.min.js?v=1.0.2"></script>
  <link href="/lib/pace/pace-theme-minimal.min.css?v=1.0.2" rel="stylesheet">







<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  
    
      
    

    
  

  
    
      
    

    
  

  
    
      
    

    
  

  
    
    
    <link href="//fonts.cat.net/css?family=Roboto Slab:300,300italic,400,400italic,700,700italic|Roboto Slab:300,300italic,400,400italic,700,700italic|Lobster Two:300,300italic,400,400italic,700,700italic|PT Mono:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=6.3.0" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=6.3.0">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=6.3.0">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=6.3.0">


  <link rel="mask-icon" href="/images/logo.svg?v=6.3.0" color="#222">





  <meta name="keywords" content="Hexo, NexT" />




  


  <link rel="alternate" href="/atom.xml" title="XieJava's blog" type="application/atom+xml" />






<meta property="og:type" content="website">
<meta property="og:title" content="XieJava&#39;s blog">
<meta property="og:url" content="http://xiejava.ishareread.com/page/6/index.html">
<meta property="og:site_name" content="XieJava&#39;s blog">
<meta property="article:author" content="XieJava">
<meta name="twitter:card" content="summary">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    version: '6.3.0',
    sidebar: {"position":"right","display":"hide","offset":12,"b2t":false,"scrollpercent":true,"onmobile":true},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: 'undefined',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://xiejava.ishareread.com/page/6/"/>





  <title>XieJava's blog</title>
  








<meta name="generator" content="Hexo 4.2.1"></head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-right 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">XieJava's blog</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <h1 class="site-subtitle" itemprop="description">记录最好的自己</h1>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-question-circle"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            关于
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://xiejava.ishareread.com/posts/8e13284d/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="XieJava">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="https://img9.doubanio.com/icon/ul70489051-4.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="XieJava's blog">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/posts/8e13284d/" itemprop="url">网络安全产品之认识4A统一安全管理平台</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2024-03-28T16:14:33+08:00">
                2024-03-28
              </time>
            

            
              <span class="post-meta-divider">|</span>
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-check-o"></i>
              </span>
              
                <span class="post-meta-item-text">更新于&#58;</span>
              
              <time title="更新于" itemprop="dateModified" datetime="2024-06-13T22:52:40+08:00">
                2024-06-13
              </time>
            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E6%8A%80%E6%9C%AF/" itemprop="url" rel="index">
                    <span itemprop="name">技术</span>
                  </a>
                </span>

                
                
                  ， 
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E6%8A%80%E6%9C%AF/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8/" itemprop="url" rel="index">
                    <span itemprop="name">网络安全</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/posts/8e13284d/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count valine-comment-count" data-xid="/posts/8e13284d/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          
             <span id="/posts/8e13284d/" class="leancloud_visitors" data-flag-title="网络安全产品之认识4A统一安全管理平台">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">阅读次数&#58;</span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  3.1k
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">
                  10
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>随着业务网的发展，网络规模迅速扩大，安全问题不断出现。传统的账号口令管理、访问控制及审计措施已无法满足企业业务发展的需求。过去每个业务网系统常常各自维护一套用户信息数据，这种方式使得管理变得复杂且难以统一。同时，孤立地以日志形式审计操作者在系统内的操作行为，也使得审计过程变得繁琐和低效。</p>
<p>因此，4A统一安全管理平台解决方案应运而生。这个解决方案将不同应用、业务过程、后端系统、服务和信息、知识等内容集成到一个软件系统平台内，从而实现了账号管理、认证管理、授权管理和安全审计的集中化、统一化管理。4A系统的诞生是对企业内部安全管理需求的直接回应，是为了解决传统安全管理方式中的不足，提高企业网络安全性、降低管理成本并强化系统安全性和政策符合性。</p>
<h2 id="一、什么是4A统一安全管理平台"><a href="#一、什么是4A统一安全管理平台" class="headerlink" title="一、什么是4A统一安全管理平台"></a>一、什么是4A统一安全管理平台</h2><p>4A统一安全管理平台是一个以身份为中心，实现帐号、认证、授权和审计统一管控的安全访问平台。它可为企业IT系统提供综合安全防护，其核心目的是提高系统的安全性、管理效率和用户访问的便捷性。</p>
<p>其核心包括账号（Account）管理、认证（Authentication）管理、授权（Authorization）管理和安全审计（Audit）。这一系统为企业IT系统提供综合安全防护，通过集中的帐号管理、身份认证、授权管理和安全审计等功能，为企业提供强健的、基于统一策略的解决方案，解决企业内控等问题，降低管理成本，提高系统安全性和政策符合性。</p>
<h2 id="二、4A统一安全管理平台的主要功能"><a href="#二、4A统一安全管理平台的主要功能" class="headerlink" title="二、4A统一安全管理平台的主要功能"></a>二、4A统一安全管理平台的主要功能</h2><p>4A统一安全管理平台其核心包括账号（Account）管理、认证（Authentication）管理、授权（Authorization）管理和安全审计（Audit）。具体而言，该平台实现了以下功能：</p>
<ol>
<li>帐号管理：提供统一的帐号管理功能，支持主流的操作系统、网络设备和应用系统。这包括帐号的全生命周期管理，如创建、删除及同步等，以及帐号密码策略、密码强度、生存周期的设定。</li>
<li>认证管理：根据用户应用的实际需要，提供不同强度的认证方式，如静态口令、双因子认证（一次性口令、数字证书、动态口令）等，并且能够集成现有其他新型认证方式，如生物特征等。此外，还可以实现用户认证的统一管理，并提供统一的认证门户，实现企业信息资源访问的单点登录。</li>
<li>授权管理：集中管理系统资源和应用资源的权限，实现权限的统一展现、收集、变更和回收。</li>
<li>审计管理：全面记录用户的登录行为和操作行为，基于场景的异常行为分析，实现对大量日志的有效审计。</li>
</ol>
<p>此外，4A统一安全管理平台还建立了“自然人账号——资源——资源账号”的对应关系，实现自然人对资源的统一授权。同时，对授权人员的运维操作进行记录、分析、展现，加强了内部业务操作行为监管，避免了核心资产在运维管理环节中的损失，保障了业务系统的正常运营。</p>
<h2 id="三、4A统一安全管理平台的工作原理"><a href="#三、4A统一安全管理平台的工作原理" class="headerlink" title="三、4A统一安全管理平台的工作原理"></a>三、4A统一安全管理平台的工作原理</h2><p>4A系统的工作原理主要围绕账号（Account）、认证（Authentication）、授权（Authorization）和审计（Audit）四个核心组件展开，为企业IT系统提供统一的安全管理。<br>首先，4A系统负责账号的全生命周期管理，包括账号的创建、修改、删除等，以及密码策略的制定和执行。这一环节确保了用户账号的规范性和安全性。<br>其次，在认证阶段，4A系统通过采用多种认证方式（如静态口令、动态令牌、生物特征识别等），对用户身份进行验证，确保只有合法的用户才能访问系统。<br>授权环节是4A系统的核心功能之一。它根据用户的角色和权限，为用户分配相应的访问和操作权限。通过细粒度的权限管理，4A系统能够实现对关键资源和敏感数据的保护，防止未经授权的访问和操作。<br>最后，在审计环节，4A系统记录并分析用户的登录、操作等行为，为安全事件溯源和责任追究提供有力支持。同时，通过对审计数据的分析，企业可以及时发现潜在的安全风险，并采取相应的措施进行防范。<br>此外，4A系统通常还具备与其他安全设备和系统的集成能力，如与防火墙、入侵检测系统（IDS）、安全事件管理系统（SIEM）等进行联动，共同构建企业网络安全防线。<br>4A系统工作原理通过账号管理、身份认证、授权控制和安全审计等功能，实现了对企业IT系统的统一安全管理，提升了企业的网络安全防护能力。</p>
<h2 id="四、4A系统与堡垒机的区别与关系"><a href="#四、4A系统与堡垒机的区别与关系" class="headerlink" title="四、4A系统与堡垒机的区别与关系"></a>四、4A系统与堡垒机的区别与关系</h2><p>4A系统和堡垒机在网络安全领域都扮演着重要的角色，但它们各自具有不同的功能和定位。</p>
<p>4A系统是一个统一的安全管理平台解决方案，其核心组件包括账号（Account）管理、认证（Authentication）管理、授权（Authorization）管理和安全审计（Audit）。它旨在为企业IT系统提供综合安全防护，通过集中的帐号管理、身份认证、授权管理和安全审计等功能，解决企业内控等问题，降低管理成本，提高系统安全性和政策符合性。4A系统提供了一种集中统一的管理方式，侧重于身份管理，确保只有经过授权的用户才能访问系统资源。</p>
<p>堡垒机，也被称为“跳板机”或“跳板服务器”，是一种网络安全设备。其主要功能是管理和监控访问计算机网络的用户，尤其是那些需要对关键系统进行管理或维护的人员。堡垒机具有访问控制、会话监控、远程管理和权限管理等功能，能够防止未经授权的访问和潜在的网络入侵，确保用户只能访问其工作需要的资源。堡垒机起源于旁路审计产品，通过接管终端对资源的访问，在审计的同时还能对操作命令进行细粒度管控，提供了资源运维统一入口，其本质是提供资源运维统一入口，侧重于运维和审计。</p>
<p>两者在功能上存在明显区别，但又具有一定的关联性。从核心能力来看，4A对外输出的是身份和访问管理能力，堡垒机对外输出的是运维管控能力。在企业的网络安全架构中，4A系统主要负责对身份和访问进行统一管理，而堡垒机则作为能力组件，接收并执行4A系统制定的策略。两者协同工作，共同提升企业的网络安全水平。</p>
<h2 id="五、如何在4A平台上实施帐号和认证的一体化管理"><a href="#五、如何在4A平台上实施帐号和认证的一体化管理" class="headerlink" title="五、如何在4A平台上实施帐号和认证的一体化管理"></a>五、如何在4A平台上实施帐号和认证的一体化管理</h2><p>在4A平台上实施帐号和认证的一体化管理，通常涉及以下几个关键步骤：</p>
<ol>
<li>帐号整合与标准化：首先，需要将所有分散在各个系统和应用中的帐号整合到4A平台中，确保所有帐号信息的集中管理。同时，制定统一的帐号命名规范、密码策略等，确保帐号信息的一致性和安全性。</li>
<li>单点登录（SSO）实施：为了实现帐号和认证的一体化管理，单点登录是不可或缺的功能。通过配置单点登录系统，用户可以只需一次登录即可访问多个系统和应用，无需在每个系统中分别输入帐号和密码。这大大提高了用户的使用便捷性，同时也降低了密码泄露的风险。</li>
<li>多因素认证集成：为了提高认证的安全性和可靠性，可以集成多因素认证方式。除了传统的用户名和密码认证外，还可以引入指纹、面部识别、手机验证码等多种认证方式。这样，即使在密码泄露的情况下，攻击者也难以通过其他认证方式访问系统。</li>
<li>权限管理与授权：在4A平台上，需要对用户的权限进行精细化的管理。根据用户的角色和职责，为其分配相应的访问权限和操作权限。同时，建立授权机制，确保用户在访问敏感数据或执行关键操作时，需要经过适当的授权和审批流程。</li>
<li>审计与日志记录：为了确保帐号和认证活动的可追溯性，4A平台应提供审计和日志记录功能。记录用户的登录信息、操作记录等，以便在发生安全事件时能够及时发现并追溯。</li>
<li>定期审查与更新：帐号和认证策略需要定期审查和更新，以适应业务发展和安全威胁的变化。定期检查帐号的使用情况、权限分配是否合理、认证方式是否足够安全等，并根据需要进行调整和优化。</li>
</ol>
<p>通过以上步骤，可以在4A平台上实现帐号和认证的一体化管理，提高系统的安全性和用户体验。同时，这也为企业提供了一个集中、统一的安全管理解决方案，降低了管理成本并简化了管理流程。</p>
<h2 id="六、4A系统运营管理建议"><a href="#六、4A系统运营管理建议" class="headerlink" title="六、4A系统运营管理建议"></a>六、4A系统运营管理建议</h2><ol>
<li>建设统一的4A系统，实现运营维护入口统一，企业的网络设备、系统平台、主机和数据库等都应全部纳入到4A系统管理，4A系统应作为运营维护管控手段嵌入到故障处置、割接、升级等流程。应建立绕行4A系统行为监测能力，杜绝4A绕行行为。</li>
<li>4A账号统一管理。一个自然人仅允许分配一个主帐 号（“主帐号”指用户在 4A 系统中的唯一 ID），主帐号的用户信 息和状态应与人力系统同步；一个自然人允许拥有多个从帐号 （“从帐号”指网络设备、系统平台、主机和数据库等帐号）， 但同一网络设备或系统平台只能有唯一从帐号。 </li>
<li>4A 系统认证管理。4A 系统应采取零信任接入认证、 双因素认证、活体实人认证等手段确保帐号登录和认证安全， 须启用 3 次认证失败自动锁定、长时间无操作自动下线等安全 配置。 </li>
<li>4A 系统授权管理。4A系统的权限分配遵循“最小化 原则”，应按指令级授权，有效期不超过 1 年，按系统设置帐号和权限管理员，对帐号和权限的申请、变更和回收等进行管理。当人员离岗或离职时，应在 24 小时内完成帐号的关停和权限的清理。 </li>
<li>4A 系统审计。4A 系统维护部门应建立 5W1H 自动化审计能力，实现自动告警能力。安全运营维护单位应通过 4A 系统开展高风险操作、数据下载等审计，建立告警、处置和复核机制，及时发现违规操作问题。4A 系统日志应保存 1 年以上。 </li>
</ol>
<hr>
<p>博客地址：<a href="http://xiejava.ishareread.com/" target="_blank" rel="noopener">http://xiejava.ishareread.com/</a></p>
<center> 
<br>

<p><img src="https://xiejava1018.github.io/xiejavaimagesrc/images/fullbug%E5%BE%AE%E4%BF%A1%E5%85%AC%E4%BC%97%E5%8F%B7.jpg" alt="“fullbug”微信公众号" title="“fullbug”微信公众号"> </p>
<p>关注：微信公众号,一起学习成长！</center></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://xiejava.ishareread.com/posts/ce59d1e6/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="XieJava">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="https://img9.doubanio.com/icon/ul70489051-4.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="XieJava's blog">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/posts/ce59d1e6/" itemprop="url">Python爬虫如何快速入门</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2024-03-26T10:33:23+08:00">
                2024-03-26
              </time>
            

            
              <span class="post-meta-divider">|</span>
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-check-o"></i>
              </span>
              
                <span class="post-meta-item-text">更新于&#58;</span>
              
              <time title="更新于" itemprop="dateModified" datetime="2024-06-13T22:52:40+08:00">
                2024-06-13
              </time>
            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E6%8A%80%E6%9C%AF/" itemprop="url" rel="index">
                    <span itemprop="name">技术</span>
                  </a>
                </span>

                
                
                  ， 
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E6%8A%80%E6%9C%AF/%E5%BC%80%E5%8F%91/" itemprop="url" rel="index">
                    <span itemprop="name">开发</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/posts/ce59d1e6/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count valine-comment-count" data-xid="/posts/ce59d1e6/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          
             <span id="/posts/ce59d1e6/" class="leancloud_visitors" data-flag-title="Python爬虫如何快速入门">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">阅读次数&#58;</span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  2.3k
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">
                  8
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>写了几篇网络爬虫的博文后，有网友留言问Python爬虫如何入门？今天就来了解一下什么是爬虫，如何快速的上手Python爬虫。</p>
<h2 id="一、什么是网络爬虫"><a href="#一、什么是网络爬虫" class="headerlink" title="一、什么是网络爬虫"></a>一、什么是网络爬虫</h2><p>网络爬虫，英文名称为Web Crawler或Spider，是一种通过程序在互联网上自动获取信息的技术。它根据指定的规则，从互联网上下载网页、图片、视频等内容，并抽取其中的有用信息进行处理。简单来说，网络爬虫可以看作是在互联网上自动“爬行”的程序，它们从某个或某些初始网页开始，读取网页内容，找到其中的链接地址，然后通过这些链接地址寻找下一个网页，这样不断循环，直到按照某种策略抓取完所需的网页为止。</p>
<p>网络爬虫的应用场景非常广泛，包括搜索引擎中的网页抓取、数据挖掘、网站监测等领域。例如，搜索引擎通过爬虫技术抓取互联网上的网页信息，建立索引数据库，以便用户进行关键词搜索时能够快速找到相关信息。同时，网络爬虫也需要注意遵守相关法律法规和网站的使用协议，避免对网站造成不必要的负担或侵犯用户隐私。</p>
<h2 id="二、网络爬虫的工作原理"><a href="#二、网络爬虫的工作原理" class="headerlink" title="二、网络爬虫的工作原理"></a>二、网络爬虫的工作原理</h2><p>网络爬虫（Web Crawler）是一种自动化程序，用于在互联网上按照一定规则和算法自动获取网页信息。网络爬虫通过访问网站的URL，并根据预设的规则抓取页面内容，然后将抓取到的数据保存、分析或用于其他用途。<br>网络爬虫的主要工作步骤包括以下几个方面：<br><strong>确定爬取目标–&gt;抓取网页内容–&gt;解析网页–&gt;处理数据</strong></p>
<ol>
<li>确定爬取目标：网络爬虫会从一个或多个起始URL开始，然后根据链接关系逐步发现更多的网页。它可以通过遍历网页的超链接、Sitemap、RSS订阅等方式来发现新的网页。</li>
<li>抓取网页内容：一旦网络爬虫发现了目标网页，它会向服务器发送HTTP请求，获取网页的HTML代码或其他相关资源（如图片、视频等）。获取到的网页内容将会被保存到本地或内存中。</li>
<li>解析网页：网络爬虫通常会对抓取到的网页进行解析，提取其中的结构化数据，例如标题、正文、链接、图片等内容。这通常需要使用HTML解析器来处理网页内容。</li>
<li>处理数据：抓取到的数据可以被进一步处理、分析、过滤、清洗或存储。这些数据可以用于搜索引擎的索引、数据分析、信息检索、机器学习等各种用途。<center> 

</li>
</ol>
<p><img src="https://xiejava1018.github.io/xiejavaimagesrc/images/2024/20240326/%E7%BD%91%E7%BB%9C%E7%88%AC%E8%99%AB%E5%B7%A5%E4%BD%9C%E6%AD%A5%E9%AA%A4.png" alt="网络爬虫工作步骤"></p>
</center>

<h2 id="三、学习爬虫需要哪些前置知识"><a href="#三、学习爬虫需要哪些前置知识" class="headerlink" title="三、学习爬虫需要哪些前置知识"></a>三、学习爬虫需要哪些前置知识</h2><p>了解到网络爬虫的工作原理后，就知道了爬虫需要哪些前置知识了。</p>
<ol>
<li><strong>需要具备基础的网络基础知识</strong><br>  需要理解HTTP请求与响应的基本原理，包括请求方法（GET、POST等）、请求头、请求体以及响应状态码等。</li>
<li><strong>需要了解熟悉HTML和CSS基础知识</strong><br>  需要了解HTML的基本结构和常用标签，如标题、段落、链接、图片等<br>  需要熟悉CSS选择器的基本语法和用法，以便在解析网页时能够定位并提取所需内容。</li>
<li><strong>最好需要熟悉正则表达式</strong><br>  学习正则表达式的语法和用法，以便在爬虫中用于匹配和提取特定格式的文本信息。</li>
<li><strong>了解基本的数据库知识</strong><br> 因为最终爬取的数据需要存储到数据库中，那么需要了解一些基本的数据库知识如常用的关系型数据库mysql或非关系型数据库MongoDB</li>
</ol>
<h2 id="四、Python实现网络爬虫有什么优势"><a href="#四、Python实现网络爬虫有什么优势" class="headerlink" title="四、Python实现网络爬虫有什么优势"></a>四、Python实现网络爬虫有什么优势</h2><p>要实现网络爬虫需要编写代码来实现，Python实现网络爬虫具有许多优势，使其成为首选的爬虫开发语言之一。</p>
<ol>
<li><strong>易学易用</strong>：Python具有简洁、清晰的语法，易于学习和上手。它的语法类似于伪代码，使得编写爬虫代码变得简单直观。</li>
<li><strong>丰富的爬虫库和工具</strong>：Python拥有丰富的第三方爬虫库和工具，如Beautiful Soup、Scrapy、Requests、Selenium等，这些库提供了丰富的功能和灵活的选项，可以满足不同场景下的爬虫需求。</li>
<li><strong>强大的数据处理能力</strong>：Python在数据处理和分析方面有着强大的支持，如Pandas、NumPy、Matplotlib等库，可以轻松地对爬取到的数据进行处理、分析和可视化。</li>
<li><strong>活跃的社区支持</strong>：Python拥有庞大而活跃的社区，你可以轻松地找到大量的教程、文档、示例代码以及问答社区，解决遇到的问题并不断提升技能。</li>
<li><strong>跨平台性</strong>：Python是一种跨平台的语言，可以在Windows、Linux、Mac等操作系统上运行，因此可以轻松地部署和运行爬虫程序。</li>
<li><strong>广泛的应用领域</strong>：Python不仅在网络爬虫领域广泛应用，还在数据科学、人工智能、Web开发等领域有着广泛的应用。因此学习Python不仅有助于网络爬虫开发，还能为未来的职业发展打下良好基础。</li>
</ol>
<p>Python实现网络爬虫具有易学易用、丰富的库和工具、强大的数据处理能力、活跃的社区支持、跨平台性和广泛的应用领域等优势，使其成为开发网络爬虫的首选语言之一。</p>
<h2 id="五、如何快速入门Python爬虫"><a href="#五、如何快速入门Python爬虫" class="headerlink" title="五、如何快速入门Python爬虫"></a>五、如何快速入门Python爬虫</h2><p>以下是一些建议的步骤和资源，帮助开始Python爬虫的学习之旅：</p>
<ol>
<li><strong>学习Python基础：</strong><br>● 如果你还没有学习Python，首先需要掌握Python的基础知识，包括变量、数据类型、控制流、函数、模块等。<br>● 推荐资源：官方Python教程、菜鸟教程、W3Schools等。</li>
<li><strong>了解网络基础知识</strong>：<br>● 学习HTTP协议、URL结构、请求方法（GET、POST等）和响应状态码等网络基础知识。<br>● 推荐资源：W3Schools等。</li>
<li><strong>使用requests库发送HTTP请求</strong>：<br>● requests是Python中非常流行的HTTP库，用于发送HTTP请求。requests 库提供了便捷的方式来发送HTTP请求，处理响应内容，包括cookies、headers等细节。<br>● 安装：pip install requests<br>● 学习如何发送GET和POST请求，处理响应，以及设置请求头等。</li>
<li><strong>解析网页内容</strong>：<br>● 学习使用BeautifulSoup或lxml等库来解析HTML内容，提取所需数据。BeautifulSoup, lxml 等库提供了强大的网页解析功能，能够轻松解析HTML和XML文档结构。<br>● 安装：pip install beautifulsoup4 和 pip install lxml<br>● 掌握选择器语法，如CSS选择器和XPath。<br>● 学习基础的正则表达式。参考《<a href="http://xiejava.ishareread.com/posts/994a1838/" target="_blank" rel="noopener">Python与正则表达式</a>》</li>
<li><strong>处理JavaScript动态加载的内容</strong>：<br>● 有些网页内容是通过JavaScript动态加载的，直接请求HTML可能无法获取到完整内容。<br>● 学习使用Selenium库来模拟浏览器行为，获取动态加载的内容。Selenium 可以用来驱动真实的浏览器进行动态页面的爬取和交互。<br>● 安装：pip install selenium，并下载对应的浏览器驱动。参考《<a href="http://xiejava.ishareread.com/posts/8370b2b6/" target="_blank" rel="noopener">selenium安装与配置</a>》</li>
<li><strong>使用代理和应对反爬虫机制</strong>：<br>● 学习如何使用代理IP来避免被封禁，以及如何应对常见的反爬虫机制，如验证码、用户登录等。<br>● 学习和使用mitmproxy代理工具来抓包进行数据爬取。参考《<a href="http://xiejava.ishareread.com/posts/699b1506/" target="_blank" rel="noopener">mitmproxy安装与配置</a>》</li>
<li><strong>存储和处理数据</strong>：<br>● 学习将数据存储到文件（如CSV、JSON等）或数据库（如MySQL、MongoDB等）中。<br>● 掌握使用Python进行数据清洗和处理的技巧。pandas是做数据清洗、处理、分析的利器，可以参考《<a href="http://xiejava.ishareread.com/posts/17215b2c/" target="_blank" rel="noopener">pandas快速入门指南</a>》</li>
<li><strong>高效与可扩展</strong>：<br>● 学习Scrapy框架，Scrapy框架支持分布式爬虫，允许大规模数据采集。可以参考《<a href="http://xiejava.ishareread.com/posts/dfc313ee/" target="_blank" rel="noopener">Scrapy爬虫框架实战</a>》</li>
<li><strong>实践项目</strong>：<br>● 通过实践项目来巩固所学知识，例如爬取某个网站的新闻、商品信息等。<br>可以参考《<a href="http://xiejava.ishareread.com/posts/eab21fe5/" target="_blank" rel="noopener">Python爬虫获取电子书资源实战</a>》、《<a href="http://xiejava.ishareread.com/posts/6e762a1a/" target="_blank" rel="noopener">Selenium实战-模拟登录淘宝并爬取商品信息</a>》、《<a href="http://xiejava.ishareread.com/posts/81e07ee2/" target="_blank" rel="noopener">mitmproxy实战-通过mitmdump爬取京东金榜排行数据</a>》、《<a href="http://xiejava.ishareread.com/posts/db2fbb43/" target="_blank" rel="noopener">Python爬取京东商品评价信息实战</a>》、《<a href="http://xiejava.ishareread.com/posts/913ab5e4/" target="_blank" rel="noopener">Python爬取淘宝商品评价信息实战</a>》</li>
<li><strong>学习资源和社区</strong>：<br>● 推荐资源：官方文档、博客文章、GitHub上的开源项目等。<br>● 加入Python和爬虫相关的社区和论坛，与其他开发者交流学习经验。</li>
</ol>
<p>最后，请注意在爬虫开发过程中要遵守法律法规和道德准则，不要对目标网站造成不必要的负担或侵犯他人隐私。</p>
<hr>
<p>作者博客：<a href="http://xiejava.ishareread.com/" target="_blank" rel="noopener">http://xiejava.ishareread.com/</a></p>
<center> 

<br>

<p><img src="https://xiejava1018.github.io/xiejavaimagesrc/images/fullbug%E5%BE%AE%E4%BF%A1%E5%85%AC%E4%BC%97%E5%8F%B7.jpg" alt="“fullbug”微信公众号" title="“fullbug”微信公众号"> </p>
<p>关注微信公众号,一起学习、成长！</center></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://xiejava.ishareread.com/posts/a0bac159/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="XieJava">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="https://img9.doubanio.com/icon/ul70489051-4.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="XieJava's blog">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/posts/a0bac159/" itemprop="url">通过jsDelivr实现Github图床CDN加速</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2024-03-20T17:02:16+08:00">
                2024-03-20
              </time>
            

            
              <span class="post-meta-divider">|</span>
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-check-o"></i>
              </span>
              
                <span class="post-meta-item-text">更新于&#58;</span>
              
              <time title="更新于" itemprop="dateModified" datetime="2024-06-13T22:52:39+08:00">
                2024-06-13
              </time>
            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E6%8A%80%E6%9C%AF/" itemprop="url" rel="index">
                    <span itemprop="name">技术</span>
                  </a>
                </span>

                
                
                  ， 
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E6%8A%80%E6%9C%AF/%E5%BC%80%E5%8F%91/" itemprop="url" rel="index">
                    <span itemprop="name">开发</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/posts/a0bac159/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count valine-comment-count" data-xid="/posts/a0bac159/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          
             <span id="/posts/a0bac159/" class="leancloud_visitors" data-flag-title="通过jsDelivr实现Github图床CDN加速">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">阅读次数&#58;</span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  866
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">
                  3
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>最近小伙伴们是否发现访问我的个人博客<a href="http://xiejava.ishareread.com/" target="_blank" rel="noopener">http://xiejava.ishareread.com/</a>图片显示特别快了？<br>我的博客的图片是放在github上的，众所周知的原因，github访问不是很快，尤其是hexo博客用github做图床经常图片刷不出来。一直想换图床，直到找到了jsDelivr，通过jsDelivr实现Github的图床CDN加速后果然速度快了很多。<br>jsdelivr是一个免费的公共CDN（内容分发网络）服务，它允许网站开发者将他们的代码库、JavaScript库、字体和其他资源托管在jsdelivr上，并通过jsdelivr的CDN网络进行快速分发。使用jsdelivr可以有效地减少用户下载资源的时间，提高网页加载速度，同时减轻原始服务器的负载。<br>jsdelivr支持多种类型的文件托管，包括JavaScript、CSS、字体、图片等。开发者可以将自己的文件上传到jsdelivr，并获取一个指向这些文件的URL。然后，他们可以在自己的网站中引用这些URL，jsdelivr会自动处理文件的缓存、分发和版本控制。<br>jsdelivr的优点包括：</p>
<ol>
<li>高速分发：jsdelivr拥有全球分布的CDN网络，可以确保资源在全球范围内都能快速加载。</li>
<li>可靠性高：jsdelivr提供了高可用性和容错性，确保资源的稳定性和可靠性。</li>
<li>易于使用：开发者可以简单地通过上传文件或使用现有的库来获取资源的URL，并在网站上引用它们。</li>
<li>开源和免费：jsdelivr是一个开源项目，提供免费的CDN服务，对开发者非常友好。</li>
</ol>
<p>jsdelivr的官网地址jsdelivr.com 对于gitHub的cdn加速说明如下图所示。<br><img src="https://xiejava1018.github.io/xiejavaimagesrc/images/2024/20240320/1-jsdelivr%E5%AE%98%E7%BD%91%E7%9A%84github%E8%AF%B4%E6%98%8E.png" alt="gitHub的cdn加速说明"></p>
<p>对于github的图床来说，要用jsdelivr的cdn加速服务很简单<br>GitHub: <code>https://&lt;jsDelivr加速域名&gt;/gh/&lt;用户&gt;/&lt;项目&gt;@&lt;版本&gt;/&lt;资源路径&gt;</code><br><img src="https://xiejava1018.github.io/xiejavaimagesrc/images/2024/20240320/2-github%E5%9B%BE%E5%BA%8A%E8%AF%B4%E6%98%8E.png" alt="github图床加速"></p>
<p>拿一个实例来说明：<br>github的图床地址：<code>https://xiejava1018.github.io/xiejavaimagesrc/images/2024/20240320/1-jsdelivr官网的github说明.png</code></p>
<p>jsdelivr的cdn加速地址为：<code>https://xiejava1018.github.io/xiejavaimagesrc/images/2024/20240320/1-jsdelivr官网的github说明.png</code></p>
<p>对于hexo的博客来说，就是要把原来所有在博客md文件中的<strong>github图床地址换成jsdelivr的cdn加速地址</strong>。<br>写个Python程序很容易就能完成这个工作。<br><strong>代码如下：</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">from</span> logutils <span class="keyword">import</span> logging</span><br><span class="line">logger=logging.getLogger(__name__)  <span class="comment">#定义模块日志记录器</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 修改替换文件内容，进行字符串替换</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">changfile</span><span class="params">(blog_md_file,old_str,new_str)</span>:</span></span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        <span class="keyword">with</span> open(blog_md_file, <span class="string">"r+"</span>,encoding=<span class="string">'utf-8'</span>) <span class="keyword">as</span> file:  <span class="comment"># 打开文件</span></span><br><span class="line">            contents = file.read()  <span class="comment"># 读取文件内容</span></span><br><span class="line">            contents = contents.replace(old_str, new_str)  <span class="comment"># 替换字符串</span></span><br><span class="line">            file.seek(<span class="number">0</span>)  <span class="comment"># 定位到文件开头</span></span><br><span class="line">            file.write(contents)  <span class="comment"># 将修改后的内容写入文件</span></span><br><span class="line">            file.truncate()  <span class="comment"># 删除文件剩余部分</span></span><br><span class="line">            logger.info(blog_md_file+<span class="string">'文件中的'</span>+old_str+<span class="string">'已替换成'</span>+new_str)</span><br><span class="line">    <span class="keyword">except</span> PermissionError:</span><br><span class="line">        logger.error(<span class="string">"Permission denied when trying to open the file."</span>)</span><br><span class="line">    <span class="keyword">except</span> FileNotFoundError:</span><br><span class="line">        logger.error(<span class="string">"File not found."</span>)</span><br><span class="line">    <span class="keyword">except</span> UnicodeDecodeError:</span><br><span class="line">        logger.error(<span class="string">"The file was not decoded correctly."</span>)</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">None</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 读取目录解析md文件并进行字符串替换</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">changfilebypath</span><span class="params">(filepath=<span class="string">''</span>,old_str=<span class="string">''</span>,new_str=<span class="string">''</span>)</span>:</span></span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        files = os.listdir(filepath)</span><br><span class="line">        <span class="keyword">for</span> file <span class="keyword">in</span> files:</span><br><span class="line">            <span class="keyword">if</span> file.find(<span class="string">'.md'</span>) &gt; <span class="number">0</span>:</span><br><span class="line">                blog_file = os.path.join(filepath, file)</span><br><span class="line">                changfile(blog_file,old_str,new_str)</span><br><span class="line">    <span class="keyword">except</span> FileNotFoundError <span class="keyword">as</span> e:</span><br><span class="line">        logger.error(<span class="string">'请确认输入是否正确!'</span>,e)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    old_img_url = <span class="string">'https://xiejava1018.github.io/xiejavaimagesrc'</span>  <span class="comment"># Github图床</span></span><br><span class="line">    new_img_url = <span class="string">'https://xiejava1018.github.io/xiejavaimagesrc'</span>  <span class="comment"># jsdelivr加速</span></span><br><span class="line">    changfilebypath(filepath=<span class="string">r'D:\CloudStation\personal\xiejavablog\myhexo\myblog\source\_posts'</span>,old_str=old_img_url,new_str=new_img_url)</span><br></pre></td></tr></table></figure>

<hr>
<p>作者博客：<a href="http://xiejava.ishareread.com/" target="_blank" rel="noopener">http://xiejava.ishareread.com/</a></p>
<center> 

<br>

<p><img src="https://xiejava1018.github.io/xiejavaimagesrc/images/fullbug%E5%BE%AE%E4%BF%A1%E5%85%AC%E4%BC%97%E5%8F%B7.jpg" alt="“fullbug”微信公众号" title="“fullbug”微信公众号"> </p>
<p>关注微信公众号,一起学习、成长！</center></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://xiejava.ishareread.com/posts/913ab5e4/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="XieJava">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="https://img9.doubanio.com/icon/ul70489051-4.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="XieJava's blog">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/posts/913ab5e4/" itemprop="url">Python爬取淘宝商品评价信息实战</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2024-03-16T19:05:58+08:00">
                2024-03-16
              </time>
            

            
              <span class="post-meta-divider">|</span>
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-check-o"></i>
              </span>
              
                <span class="post-meta-item-text">更新于&#58;</span>
              
              <time title="更新于" itemprop="dateModified" datetime="2024-06-13T22:52:39+08:00">
                2024-06-13
              </time>
            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E6%8A%80%E6%9C%AF/" itemprop="url" rel="index">
                    <span itemprop="name">技术</span>
                  </a>
                </span>

                
                
                  ， 
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E6%8A%80%E6%9C%AF/%E5%BC%80%E5%8F%91/" itemprop="url" rel="index">
                    <span itemprop="name">开发</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/posts/913ab5e4/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count valine-comment-count" data-xid="/posts/913ab5e4/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          
             <span id="/posts/913ab5e4/" class="leancloud_visitors" data-flag-title="Python爬取淘宝商品评价信息实战">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">阅读次数&#58;</span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  2.1k
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">
                  9
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><img src="https://xiejava1018.github.io/xiejavaimagesrc/images/2024/20240316/0-python%E7%88%AC%E8%99%AB.png" alt="Python爬虫"></p>
<p>前期出了一个《<a href="http://xiejava.ishareread.com/posts/db2fbb43/" target="_blank" rel="noopener">爬取京东商品评价信息实战</a>》的教程，最近又有网友提到要出一个爬淘宝商品评论的教程。说实话淘宝的反爬机制做得比京东要严，所以用爬取京东商品评价信息的方式取爬取淘宝商品评价不太可行。本文还是介绍通过Selenium模拟登录后来进行淘宝商品评价信息的爬取。<br>Selenium安装与配置及如何模拟登录淘宝见《<a href="http://xiejava.ishareread.com/posts/699b1506/" target="_blank" rel="noopener">Selenium安装与配置</a>》及《<a href="http://xiejava.ishareread.com/posts/6e762a1a/" target="_blank" rel="noopener">Selenium实战-模拟登录淘宝并爬取商品信息</a>》</p>
<h2 id="一、分析需要爬取的页面"><a href="#一、分析需要爬取的页面" class="headerlink" title="一、分析需要爬取的页面"></a>一、分析需要爬取的页面</h2><p>淘宝的商品评价信息在商品详情页面，需要登录淘宝后，访问到商品详情页，并且需要点击“宝贝评价”才能看到相应的商品评价信息。<br><img src="https://xiejava1018.github.io/xiejavaimagesrc/images/2024/20240316/1-%E6%B7%98%E5%AE%9D%E5%95%86%E5%93%81%E8%AF%84%E4%BB%B7%E9%A1%B5%E9%9D%A2%E5%88%86%E6%9E%90.png" alt="淘宝商品评价页面分析"></p>
<p>我们还是要通过chrome浏览器的调试模式来分析需要点击哪个页面元素才能看到具体的评价信息。通过分析可以得知要点击&lt;<code>div class=&quot;Tabs--title--1Ov7S5f Tabs--active--2TTlc9s&quot;&gt;&lt;span data-spm-anchor-id=&quot;pc_detail.27183998/evo365560b447259.202205.i0.65b87dd6RabS41&quot;&gt;宝贝评价&lt;/span&gt;&lt;div class=&quot;Tabs--line--1ibdRMv&quot;&gt;&lt;/div&gt;&lt;/div&gt;</code> 这个元素才能进行切换到宝贝评价。<br><img src="https://xiejava1018.github.io/xiejavaimagesrc/images/2024/20240316/2-%E6%B7%98%E5%AE%9D%E5%95%86%E5%93%81%E8%AF%84%E4%BB%B7%E9%A1%B5%E9%9D%A2%E5%85%83%E7%B4%A0%E5%88%86%E6%9E%901.png" alt="页面元素分"></p>
<p>具体的评价信息是在<code>&lt;div class=&quot;Comment--content--15w7fKj&quot; data-spm-anchor-id=&quot;pc_detail.27183998/evo365560b447259.202207.i0.65b87dd6RabS41&quot;&gt;很好很喜欢下次还会买的，之前在这店买过iPhone12    Air pos pro   iPad Air3   距离上个平板时隔三年又买了iPad Air5 物流也很快，唯一的不足就是要花我自己的钱买😂哈哈哈非常推荐 &lt;/div&gt;</code> 这些<code>&lt;div class=&quot;Comment--content--15w7fKj&quot;&gt;......&lt;/div&gt;</code>元素里。<br><img src="https://xiejava1018.github.io/xiejavaimagesrc/images/2024/20240316/3-%E6%B7%98%E5%AE%9D%E5%95%86%E5%93%81%E8%AF%84%E4%BB%B7%E9%A1%B5%E9%9D%A2%E5%85%83%E7%B4%A0%E5%88%86%E6%9E%902.png" alt="页面元素分"></p>
<p>分析完页面后，就可以开始思考如何编码了。</p>
<h2 id="二、实现爬取商品评价信息的代码"><a href="#二、实现爬取商品评价信息的代码" class="headerlink" title="二、实现爬取商品评价信息的代码"></a>二、实现爬取商品评价信息的代码</h2><p>通过上面的分析，我们要获取商品评价信息，需要让Selenium进行模拟登录-&gt;访问商品列表页面-&gt;访问商品详情页面-&gt;点击“宝贝评价”-&gt;获取并解析商品评价信息。<br>前面让Selenium进行模拟登录-&gt;访问商品列表页面在《<a href="http://xiejava.ishareread.com/posts/6e762a1a/" target="_blank" rel="noopener">Selenium实战-模拟登录淘宝并爬取商品信息</a>》已有介绍。这里主要介绍后面的部分，访问商品详情页面-&gt;点击“宝贝评价”-&gt;获取并解析商品评价信息。<br>获取并解析商品评价信息有两种方式，一种是通过解析显示评价信息的元素获取，一种是通过mitmproxy代理进行流量抓包获取。</p>
<h3 id="1、通过解析显示评价信息的元素获取商品评价信息"><a href="#1、通过解析显示评价信息的元素获取商品评价信息" class="headerlink" title="1、通过解析显示评价信息的元素获取商品评价信息"></a>1、通过解析显示评价信息的元素获取商品评价信息</h3><p>selenium_taobao.py的部分代码参考如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 解析获取商品信息</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_products</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="string">"""提取商品数据"""</span></span><br><span class="line">    html = driver.page_source</span><br><span class="line">    doc = pq(html)</span><br><span class="line">    items = doc(<span class="string">'.Card--doubleCardWrapper--L2XFE73'</span>).items()</span><br><span class="line">    <span class="keyword">for</span> item <span class="keyword">in</span> items:</span><br><span class="line">        product = &#123;<span class="string">'url'</span>: item.attr(<span class="string">'href'</span>),</span><br><span class="line">                   <span class="string">'price'</span>: item.find(<span class="string">'.Price--priceInt--ZlsSi_M'</span>).text(),</span><br><span class="line">                   <span class="string">'realsales'</span>: item.find(<span class="string">'.Price--realSales--FhTZc7U-cnt'</span>).text(),</span><br><span class="line">                   <span class="string">'title'</span>: item.find(<span class="string">'.Title--title--jCOPvpf'</span>).text(),</span><br><span class="line">                   <span class="string">'shop'</span>: item.find(<span class="string">'.ShopInfo--TextAndPic--yH0AZfx'</span>).text(),</span><br><span class="line">                   <span class="string">'location'</span>: item.find(<span class="string">'.Price--procity--_7Vt3mX'</span>).text()&#125;</span><br><span class="line">        print(product)</span><br><span class="line">        item_href=item.attr(<span class="string">'href'</span>) <span class="comment"># 得到商品的详情访问页面</span></span><br><span class="line">        <span class="keyword">if</span> item_href.find(<span class="string">'https:'</span>)&gt;=<span class="number">0</span>:</span><br><span class="line">            item_url =item_href</span><br><span class="line">            print(item_url)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            item_url = <span class="string">"https:"</span> + item.attr(<span class="string">'href'</span>)</span><br><span class="line">            <span class="comment"># 爬取商品评价</span></span><br><span class="line">            get_prod_comments(item_url)</span><br><span class="line">            time.sleep(sleeptime)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 爬取商品评价</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_prod_comments</span><span class="params">(item_url)</span>:</span></span><br><span class="line">    driver.get(item_url)</span><br><span class="line">    print(<span class="string">'跳转至详情页.......'</span>+item_url)</span><br><span class="line">    ele = wait.until(EC.element_to_be_clickable((By.XPATH, <span class="string">"//div[@class='Tabs--title--1Ov7S5f ']/span"</span>)))</span><br><span class="line">    time.sleep(sleeptime)</span><br><span class="line">    <span class="comment"># 向下滚动至目标元素可见</span></span><br><span class="line">    js = <span class="string">"arguments[0].scrollIntoView();"</span></span><br><span class="line">    driver.execute_script(js, ele)</span><br><span class="line">    print(<span class="string">'向下滚动至-宝贝评价-元素可见.......'</span>)</span><br><span class="line">    driver.execute_script(<span class="string">"arguments[0].click();"</span>, ele)</span><br><span class="line">    print(<span class="string">'点击-宝贝评价.......'</span>)</span><br><span class="line">    ele_comments=driver.find_elements(By.CSS_SELECTOR,<span class="string">".Comment--content--15w7fKj"</span>)</span><br><span class="line">    print(<span class="string">'提取宝贝评价信息.......'</span>)</span><br><span class="line">    <span class="keyword">for</span> ele_comment <span class="keyword">in</span> ele_comments:</span><br><span class="line">        print(ele_comment.text)</span><br></pre></td></tr></table></figure>

<p>在解析获取商品信息的方法中通过item_href=item.attr(‘href’) # 得到商品的详情访问页面<br>在爬取商品评价get_prod_comments(item_url)的方法中，通过driver.get(item_url)跳转到了商品详情页面。通过ele = wait.until(EC.element_to_be_clickable((By.XPATH, “//div[@class=’Tabs–title–1Ov7S5f ‘]/span”)))定位到“宝贝评价”的点击按钮，通过driver.execute_script(“arguments[0].click();”, ele)进行点击事件，然后通过ele_comments=driver.find_elements(By.CSS_SELECTOR,”.Comment–content–15w7fKj”)找到显示评价信息的元素，循环后解析具体的评价文本信息。<br>效果如下：<br><img src="https://xiejava1018.github.io/xiejavaimagesrc/images/2024/20240316/4-selenium%E7%88%AC%E5%8F%96%E6%95%88%E6%9E%9C.png" alt="解析获取商品信息"></p>
<h3 id="2、通过mitmproxy代理进行流量抓包获取商品评价信息"><a href="#2、通过mitmproxy代理进行流量抓包获取商品评价信息" class="headerlink" title="2、通过mitmproxy代理进行流量抓包获取商品评价信息"></a>2、通过mitmproxy代理进行流量抓包获取商品评价信息</h3><p>既然通过Selenium进行模拟点击“宝贝评价”访问了商品评价信息，也可通过流量抓包的方式来获取商品评价信息。<br>同样chrome浏览器的调试模式来分析商品评价是从哪些接口返回的数据，这里可以看到宝贝评价是通过<code>https://h5api.m.taobao.com/h5/mtop.alibaba.review.list.for.new.pc.detail/1.0/....</code>接口返回的数据。<br><img src="https://xiejava1018.github.io/xiejavaimagesrc/images/2024/20240316/5-mintproxy%E6%8A%93%E5%8F%96%E9%A1%B5%E9%9D%A2%E5%88%86%E6%9E%901.png" alt="调试模式来分析商品评价"></p>
<p>切换到Response，可以看到接口返回的宝贝评价JSON串。<br><img src="https://xiejava1018.github.io/xiejavaimagesrc/images/2024/20240316/6-mitmproxy%E6%8A%93%E5%8F%96%E9%A1%B5%E9%9D%A2%E5%88%86%E6%9E%902.png" alt="宝贝评价JSON串"></p>
<p>有了这些信息后，就可以写mitmproxy代理抓包的代码了。<br>taobao_scripts.py代码如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> json</span><br><span class="line"></span><br><span class="line"><span class="comment"># 抓取淘宝商品评价信息</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">response</span><span class="params">(flow)</span>:</span></span><br><span class="line">    url = <span class="string">'https://h5api.m.taobao.com/h5/mtop.alibaba.review.list.for.new.pc.detail'</span></span><br><span class="line">    <span class="keyword">if</span> flow.request.url.startswith(url):</span><br><span class="line">        text = flow.response.text</span><br><span class="line">        json_data = json.loads(text)</span><br><span class="line">        print(json_data)</span><br></pre></td></tr></table></figure>

<p>在控制台运行 mitmdump -s taobao_scripts.py 启动mitmproxy代理服务。具体参考《<a href="https://xiejava.blog.csdn.net/article/details/136296522" target="_blank" rel="noopener">Selenium实战-模拟登录淘宝并爬取商品信息</a>》设置好chrome浏览器的mitmproxy代理。然后运行selenium_taobao.py通过Selenium驱动浏览器，进行自动模拟登录-&gt;访问商品列表页面-&gt;访问商品详情页面-&gt;点击“宝贝评价”。<br>在运行mitmdump的控制台可以看到通过抓包获取的淘宝商品评价的数据信息。<br>效果如下图：<br><img src="https://xiejava1018.github.io/xiejavaimagesrc/images/2024/20240316/7-mitmproxy%E6%8A%93%E5%8F%96%E6%B7%98%E5%AE%9D%E8%AF%84%E4%BB%B7%E6%95%B0%E6%8D%AE%E6%95%88%E6%9E%9C.png" alt="抓包获取的淘宝商品评价的数据信息效果"></p>
<h2 id="三、附-完整代码"><a href="#三、附-完整代码" class="headerlink" title="三、附-完整代码"></a>三、附-完整代码</h2><p>selenium_taobao.py完整代码如下</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> selenium.webdriver <span class="keyword">import</span> Chrome</span><br><span class="line"><span class="keyword">from</span> selenium.webdriver.chrome.options <span class="keyword">import</span> Options</span><br><span class="line"><span class="keyword">from</span> selenium.webdriver.support.wait <span class="keyword">import</span> WebDriverWait</span><br><span class="line"><span class="keyword">from</span> selenium.webdriver.common.by <span class="keyword">import</span> By</span><br><span class="line"><span class="keyword">from</span> selenium.webdriver.support <span class="keyword">import</span> expected_conditions <span class="keyword">as</span> EC</span><br><span class="line"><span class="keyword">from</span> selenium.common <span class="keyword">import</span> TimeoutException, NoSuchElementException</span><br><span class="line"><span class="keyword">from</span> urllib.parse <span class="keyword">import</span> quote</span><br><span class="line"><span class="keyword">from</span> pyquery <span class="keyword">import</span> PyQuery <span class="keyword">as</span> pq</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line">sleeptime=<span class="number">5</span></span><br><span class="line">chrome_options = Options()</span><br><span class="line">chrome_options.add_experimental_option(<span class="string">"debuggerAddress"</span>, <span class="string">"localhost:9222"</span>) <span class="comment">#此处端口保持和命令行启动的端口一致</span></span><br><span class="line">driver = Chrome(options=chrome_options)</span><br><span class="line">driver.implicitly_wait(<span class="number">5</span>)  <span class="comment"># 隐式等待</span></span><br><span class="line">wait = WebDriverWait(driver, <span class="number">10</span>)  <span class="comment"># 显示等待</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 模拟淘宝登录</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">login_taobao</span><span class="params">()</span>:</span></span><br><span class="line">    print(<span class="string">'开始登录...'</span>)</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        login_url=<span class="string">'https://login.taobao.com/member/login.jhtml'</span></span><br><span class="line">        driver.get(login_url)</span><br><span class="line">        check_login_type()</span><br><span class="line">        input_login_id = wait.until(EC.presence_of_element_located((By.ID, <span class="string">'fm-login-id'</span>)))</span><br><span class="line">        input_login_password = wait.until(EC.presence_of_element_located((By.ID, <span class="string">'fm-login-password'</span>)))</span><br><span class="line">        input_login_id.send_keys(<span class="string">'your account'</span>)</span><br><span class="line">        input_login_password.send_keys(<span class="string">'your password'</span>)</span><br><span class="line">        submit = wait.until(EC.element_to_be_clickable((By.CSS_SELECTOR, <span class="string">'.fm-button.fm-submit.password-login'</span>)))</span><br><span class="line">        submit.click()</span><br><span class="line">        is_loging = wait.until(EC.url_changes(login_url))</span><br><span class="line">        <span class="keyword">return</span> is_loging</span><br><span class="line">    <span class="keyword">except</span> TimeoutException:</span><br><span class="line">        print(<span class="string">'login_taobao TimeoutException'</span>)</span><br><span class="line">        submit = wait.until(EC.element_to_be_clickable((By.CSS_SELECTOR, <span class="string">'.fm-button.fm-submit'</span>)))</span><br><span class="line">        submit.click()</span><br><span class="line">        is_loging = wait.until(EC.url_changes(login_url))</span><br><span class="line">        <span class="keyword">if</span> is_loging:</span><br><span class="line">            <span class="keyword">return</span> is_loging</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            login_taobao()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 判断登录模式，如果是扫描登录则切换到用户名密码登录模式</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">check_login_type</span><span class="params">()</span>:</span></span><br><span class="line">    print(<span class="string">'判断登录模式'</span>)</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        wait.until(EC.presence_of_element_located((By.ID, <span class="string">'fm-login-id'</span>)))</span><br><span class="line">    <span class="keyword">except</span> TimeoutException:</span><br><span class="line">        change_type = wait.until(EC.presence_of_element_located((By.CSS_SELECTOR, <span class="string">'.iconfont.icon-password'</span>)))</span><br><span class="line">        change_type.click()  <span class="comment"># 切换到用户密码模式登录</span></span><br><span class="line">        print(<span class="string">'切换到用户密码模式登录...'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 解析获取商品信息</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_products</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="string">"""提取商品数据"""</span></span><br><span class="line">    html = driver.page_source</span><br><span class="line">    doc = pq(html)</span><br><span class="line">    items = doc(<span class="string">'.Card--doubleCardWrapper--L2XFE73'</span>).items()</span><br><span class="line">    <span class="keyword">for</span> item <span class="keyword">in</span> items:</span><br><span class="line">        product = &#123;<span class="string">'url'</span>: item.attr(<span class="string">'href'</span>),</span><br><span class="line">                   <span class="string">'price'</span>: item.find(<span class="string">'.Price--priceInt--ZlsSi_M'</span>).text(),</span><br><span class="line">                   <span class="string">'realsales'</span>: item.find(<span class="string">'.Price--realSales--FhTZc7U-cnt'</span>).text(),</span><br><span class="line">                   <span class="string">'title'</span>: item.find(<span class="string">'.Title--title--jCOPvpf'</span>).text(),</span><br><span class="line">                   <span class="string">'shop'</span>: item.find(<span class="string">'.ShopInfo--TextAndPic--yH0AZfx'</span>).text(),</span><br><span class="line">                   <span class="string">'location'</span>: item.find(<span class="string">'.Price--procity--_7Vt3mX'</span>).text()&#125;</span><br><span class="line">        print(product)</span><br><span class="line">        item_href=item.attr(<span class="string">'href'</span>) <span class="comment"># 得到商品的详情访问页面</span></span><br><span class="line">        <span class="keyword">if</span> item_href.find(<span class="string">'https:'</span>)&gt;=<span class="number">0</span>:</span><br><span class="line">            item_url =item_href</span><br><span class="line">            print(item_url)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            item_url = <span class="string">"https:"</span> + item.attr(<span class="string">'href'</span>)</span><br><span class="line">            <span class="comment"># 爬取商品评价</span></span><br><span class="line">            get_prod_comments(item_url)</span><br><span class="line">            time.sleep(sleeptime)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 爬取商品评价</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_prod_comments</span><span class="params">(item_url)</span>:</span></span><br><span class="line">    driver.get(item_url)</span><br><span class="line">    print(<span class="string">'跳转至详情页.......'</span>+item_url)</span><br><span class="line">    ele = wait.until(EC.element_to_be_clickable((By.XPATH, <span class="string">"//div[@class='Tabs--title--1Ov7S5f ']/span"</span>)))</span><br><span class="line">    time.sleep(sleeptime)</span><br><span class="line">    <span class="comment"># 向下滚动至目标元素可见</span></span><br><span class="line">    js = <span class="string">"arguments[0].scrollIntoView();"</span></span><br><span class="line">    driver.execute_script(js, ele)</span><br><span class="line">    print(<span class="string">'向下滚动至-宝贝评价-元素可见.......'</span>)</span><br><span class="line">    driver.execute_script(<span class="string">"arguments[0].click();"</span>, ele)</span><br><span class="line">    print(<span class="string">'点击-宝贝评价.......'</span>)</span><br><span class="line">    ele_comments=driver.find_elements(By.CSS_SELECTOR,<span class="string">".Comment--content--15w7fKj"</span>)</span><br><span class="line">    print(<span class="string">'提取宝贝评价信息.......'</span>)</span><br><span class="line">    <span class="keyword">for</span> ele_comment <span class="keyword">in</span> ele_comments:</span><br><span class="line">        print(ele_comment.text)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 自动获取商品信息并自动翻页</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">index_page</span><span class="params">(url,cur_page,max_page)</span>:</span></span><br><span class="line">    print(<span class="string">' 正在爬取：'</span>+url)</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        driver.get(url)</span><br><span class="line">        get_products()</span><br><span class="line">        next_page_btn = wait.until(EC.element_to_be_clickable((By.XPATH, <span class="string">'//button/span[contains(text(),"下一页")]'</span>)))</span><br><span class="line">        next_page_btn.click()</span><br><span class="line">        do_change = wait.until(EC.url_changes(url))</span><br><span class="line">        <span class="keyword">if</span> do_change <span class="keyword">and</span> cur_page&lt;max_page:</span><br><span class="line">            new_url=driver.current_url</span><br><span class="line">            cur_page = cur_page + <span class="number">1</span></span><br><span class="line">            index_page(new_url,cur_page,max_page)</span><br><span class="line">    <span class="keyword">except</span> TimeoutException:</span><br><span class="line">        print(<span class="string">'---index_page TimeoutException---'</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    is_loging=login_taobao()</span><br><span class="line">    <span class="keyword">if</span> is_loging:</span><br><span class="line">        print(<span class="string">'已经登录'</span>)</span><br><span class="line">        KEYWORD = <span class="string">'iPad'</span></span><br><span class="line">        url = <span class="string">'https://s.taobao.com/search?page=1&amp;q='</span> + quote(KEYWORD) + <span class="string">'&amp;tab=all'</span></span><br><span class="line">        max_page=<span class="number">1</span></span><br><span class="line">        index_page(url,<span class="number">1</span>,max_page)</span><br></pre></td></tr></table></figure>

<hr>
<p>作者博客：<a href="http://xiejava.ishareread.com/" target="_blank" rel="noopener">http://xiejava.ishareread.com/</a></p>
<center> 

<br>

<p><img src="https://xiejava1018.github.io/xiejavaimagesrc/images/fullbug%E5%BE%AE%E4%BF%A1%E5%85%AC%E4%BC%97%E5%8F%B7.jpg" alt="“fullbug”微信公众号" title="“fullbug”微信公众号"> </p>
<p>关注：微信公众号,一起学习成长！</center></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://xiejava.ishareread.com/posts/dc1cceb8/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="XieJava">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="https://img9.doubanio.com/icon/ul70489051-4.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="XieJava's blog">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/posts/dc1cceb8/" itemprop="url">数据安全之认识数据库加密系统</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2024-03-15T10:45:24+08:00">
                2024-03-15
              </time>
            

            
              <span class="post-meta-divider">|</span>
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-check-o"></i>
              </span>
              
                <span class="post-meta-item-text">更新于&#58;</span>
              
              <time title="更新于" itemprop="dateModified" datetime="2024-06-13T22:52:39+08:00">
                2024-06-13
              </time>
            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E6%8A%80%E6%9C%AF/" itemprop="url" rel="index">
                    <span itemprop="name">技术</span>
                  </a>
                </span>

                
                
                  ， 
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E6%8A%80%E6%9C%AF/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8/" itemprop="url" rel="index">
                    <span itemprop="name">网络安全</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/posts/dc1cceb8/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count valine-comment-count" data-xid="/posts/dc1cceb8/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          
             <span id="/posts/dc1cceb8/" class="leancloud_visitors" data-flag-title="数据安全之认识数据库加密系统">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">阅读次数&#58;</span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  2.9k
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">
                  9
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>数据库作为计算机信息系统的核心组成部分，在整个信息系统的构建中起着关键的作用。自20世纪60年代起，数据库技术经过短短几十年的飞速发展，现已成为整个信息系统的核心内容，并得到了广泛的应用。然而，随着数据库系统集中处理大量数据信息的任务日益繁重，其安全问题也日渐突出。</p>
<p>信息安全的关键在于数据的安全，而数据的安全则主要通过数据加密技术来实现。随着网上购物等电子商务的兴起和繁荣，以数据库为代表的信息安全已成为很多企业的共识。越来越多的企业和机构开始重视数据库的数据安全问题，因为一旦数据泄露或遭到非法访问，将可能导致严重的经济损失和声誉损害。</p>
<p>为了增强普通关系数据库管理系统的安全性，数据库加密系统应运而生。其目的是为了提供一个安全适用的数据库加密平台，对通信和数据库存储的内容实施有效保护。通过采用先进的加密技术和严格的密钥管理策略，数据库加密系统可以确保数据在存储和传输过程中的机密性、完整性和可用性，从而有效地防止数据泄露和非法访问。</p>
<p>本文让我们一起来认识数据库加密系统</p>
<h2 id="一、什么是数据库加密系统"><a href="#一、什么是数据库加密系统" class="headerlink" title="一、什么是数据库加密系统"></a>一、什么是数据库加密系统</h2><p>数据库加密系统是一款基于透明加密技术和主动防御机制的数据库防泄漏系统。<br>它主要实现对数据库中的敏感数据加密存储、访问控制增强、应用访问安全、安全审计以及三权分立等功能。通过使用特定的加密算法和密钥管理技术，数据库加密系统能够确保数据在存储和传输过程中的安全性，有效防止明文存储引起的数据泄密、外部黑客攻击以及内部高权限用户的数据窃取。数据库加密系统旨在从根本上解决数据库敏感数据泄漏问题，实现数据的高度安全和应用的完全透明。</p>
<h2 id="二、数据库加密系统的工作原理"><a href="#二、数据库加密系统的工作原理" class="headerlink" title="二、数据库加密系统的工作原理"></a>二、数据库加密系统的工作原理</h2><p>数据库加密系统的原理主要基于加密技术和密钥管理。其核心目的是确保数据库中存储的敏感数据不被未经授权的人员或程序读取或篡改。以下是数据库加密系统原理的详细解释：</p>
<ol>
<li>数据加密<br>数据加密是数据库加密系统的核心功能。它使用特定的加密算法，将数据库中的明文数据（即原始数据）转换成密文数据。这个转换过程依赖于一个或多个密钥，这些密钥是加密算法的输入参数，用于控制加密的强度和复杂性。通过这种方式，即使数据被非法获取，没有正确的密钥也无法解密和读取原始数据。</li>
<li>密钥管理<br>密钥管理是数据库加密系统中至关重要的环节。它涉及到密钥的生成、存储、分发、更新和销毁等过程。密钥的安全性直接关系到整个加密系统的安全性。因此，密钥管理通常采用多种安全措施，如使用硬件安全模块（HSM）存储密钥、实施密钥的定期更换和备份、以及使用强密码保护密钥文件等。</li>
<li>透明加密<br>透明加密是数据库加密系统的一个重要特性。它允许应用程序在不需要修改的情况下，对数据库中的敏感数据进行加密和解密操作。这意味着应用程序无需关心数据的加密细节，只需像处理普通数据一样处理加密数据。这种透明性大大简化了加密系统的部署和维护过程。</li>
<li>访问控制<br>除了数据加密外，数据库加密系统还通常实施严格的访问控制策略。这些策略通过身份验证、授权和审计等手段，确保只有经过授权的用户才能访问和操作数据库中的敏感数据。这有助于防止内部人员滥用权限或外部攻击者入侵数据库。</li>
</ol>
<p>数据库加密示意图如下：<br><img src="https://xiejava1018.github.io/xiejavaimagesrc/images/2024/20240315/0-%E6%95%B0%E6%8D%AE%E5%BA%93%E5%8A%A0%E5%AF%86%E7%A4%BA%E6%84%8F%E5%9B%BE.png" alt="数据库加密示意图"></p>
<center>数据库加密示意图</center>

<p>数据库加密系统的原理基于数据加密、密钥管理、透明加密和访问控制等多个方面。这些技术和策略共同确保数据库中的敏感数据得到充分的保护，防止未经授权的访问和泄露。</p>
<h2 id="三、数据库加密系统的核心功能"><a href="#三、数据库加密系统的核心功能" class="headerlink" title="三、数据库加密系统的核心功能"></a>三、数据库加密系统的核心功能</h2><p>数据库加密系统核心功能包括数据加密、数据解密、权限控制、审计跟踪。</p>
<ol>
<li>数据加密：通过对数据库中的敏感数据进行加密，使得即使数据被非法获取，也无法直接读取其内容。</li>
<li>数据解密：对经过加密的数据进行解密，使其能够被正常访问和使用。通常，只有具有特定权限的用户才能进行解密操作。</li>
<li>权限管理：增强对数据库访问的控制，确保只有经过授权的用户才能访问特定的数据。</li>
<li>审计跟踪：记录和跟踪数据库的所有操作，包括谁在何时访问了哪些数据，进行了哪些操作，以便在发生安全问题时进行追溯和审计。</li>
</ol>
<h2 id="四、数据库加密系统的特点和优势"><a href="#四、数据库加密系统的特点和优势" class="headerlink" title="四、数据库加密系统的特点和优势"></a>四、数据库加密系统的特点和优势</h2><p>数据库加密系统具有以下特点和优势：</p>
<ol>
<li>数据安全性增强：通过数据加密技术，数据库加密系统能够确保敏感数据在存储和传输过程中的安全性。即使数据被非法获取，攻击者也无法直接读取其明文内容，从而防止数据泄露和滥用。</li>
<li>透明性：数据库加密系统通常设计为对最终用户透明，管理员可以根据需要进行明文和密文的转换工作。这使得用户无需改变原有的操作习惯，同时也降低了系统部署和维护的复杂性。</li>
<li>独立性：加密系统独立于数据库应用系统，这意味着无需改动数据库应用系统就能实现数据加密功能。这种独立性使得数据库加密系统能够灵活地集成到现有的信息系统中。</li>
<li>性能影响较小：数据库加密系统通常采用高效的加解密算法和优化的处理流程，以确保在加密数据的同时不会对数据库服务器的性能产生显著影响。这使得系统能够在实际应用中保持较高的响应速度和吞吐量。</li>
<li>灵活的加密方式：数据库加密系统支持多种加密方式，如字段级加密、记录级加密等，以满足不同场景下的安全需求。此外，系统还可以根据业务需求灵活调整加密策略，以适应数据的变化和新的安全威胁。</li>
<li>完善的密钥管理：密钥是数据加密和解密的关键。数据库加密系统通常具备完善的密钥管理功能，包括密钥的生成、存储、分发、更新和销毁等。这确保了密钥的安全性和可用性，从而提高了整个加密系统的安全性。</li>
<li>合规性支持：随着数据保护法规的日益严格，数据库加密系统能够帮助企业满足相关的合规性要求。通过实施数据加密和访问控制等安全措施，系统能够确保数据的合规性存储和使用，避免因违反法规而面临的经济和法律风险。</li>
</ol>
<p>数据库加密系统通过增强数据安全性、提供透明性、独立性、较小的性能影响、灵活的加密方式、完善的密钥管理以及合规性支持等特点和优势，为企业和机构提供了一个安全、可靠的数据库环境。</p>
<h2 id="五、数据库加密系统的部署方式"><a href="#五、数据库加密系统的部署方式" class="headerlink" title="五、数据库加密系统的部署方式"></a>五、数据库加密系统的部署方式</h2><h3 id="1、在线透明部署"><a href="#1、在线透明部署" class="headerlink" title="1、在线透明部署"></a>1、在线透明部署</h3><p>通过在线透明的部署方式将数据库加密系统串接在数据库前，对数据库进行透明加密，提高数据库服务的可用性，部署如下图所示。<br><img src="https://xiejava1018.github.io/xiejavaimagesrc/images/2024/20240315/1-%E6%95%B0%E6%8D%AE%E5%BA%93%E5%8A%A0%E5%AF%86%E7%B3%BB%E7%BB%9F%E4%B8%B2%E8%81%94%E9%83%A8%E7%BD%B2%E5%9B%BE.png" alt="数据库加密系统串联部署图"></p>
<center>数据库加密系统串联部署图</center>

<h3 id="2、旁路代理模式"><a href="#2、旁路代理模式" class="headerlink" title="2、旁路代理模式"></a>2、旁路代理模式</h3><p>通过旁路部署的方式将数据库透明加密接入到数据库所在网络中，数据库透明加密采用反向代理模式，部署如下图所示。<br><img src="https://xiejava1018.github.io/xiejavaimagesrc/images/2024/20240315/2-%E6%95%B0%E6%8D%AE%E5%BA%93%E5%8A%A0%E5%AF%86%E7%B3%BB%E7%BB%9F%E6%97%81%E8%B7%AF%E4%BB%A3%E7%90%86%E9%83%A8%E7%BD%B2%E5%9B%BE.png" alt="数据库加密系统旁路代理部署图"></p>
<center>数据库加密系统旁路代理部署图</center>

<h2 id="六、数据库加密系统的应用场景"><a href="#六、数据库加密系统的应用场景" class="headerlink" title="六、数据库加密系统的应用场景"></a>六、数据库加密系统的应用场景</h2><p>数据库加密系统有着广泛的应用场景，主要用于保护敏感数据的安全性和完整性，防止数据泄露和非法访问。以下是一些常见的应用场景：</p>
<ol>
<li>金融行业：银行、证券、保险等金融机构在处理客户数据时，涉及大量敏感信息，如个人身份信息、账户信息、交易记录等。数据库加密系统能够确保这些敏感数据在存储和传输过程中的安全，防止被非法获取或篡改。</li>
<li>医疗领域：医疗机构存储着大量的患者个人信息、病历记录、检查结果等敏感数据。数据库加密系统可以保护这些数据的安全，防止数据泄露和滥用，维护患者的隐私权益。</li>
<li>政府机构：政府部门在政务处理、人口管理、税务征收等方面积累了大量的公民个人信息和敏感数据。通过数据库加密系统，政府可以确保这些数据的安全存储和合法使用，防止数据被非法获取或滥用。</li>
<li>电子商务：电商平台涉及大量用户信息、交易数据等敏感信息。数据库加密系统可以保护这些数据的安全，防止黑客攻击和数据泄露，维护电商平台的声誉和用户的信任。</li>
<li>教育行业：学校和教育机构存储着学生的个人信息、成绩记录、学籍资料等敏感数据。数据库加密系统可以保护这些数据的安全，防止数据被非法访问或篡改，维护教育公平和信息安全。</li>
</ol>
<p>数据库加密系统适用于需要保护敏感数据安全的各个领域，确保数据在存储、传输和使用过程中的完整性和机密性。</p>
<hr>
<p>作者博客：<a href="http://xiejava.ishareread.com/" target="_blank" rel="noopener">http://xiejava.ishareread.com/</a></p>
<center> 
<br>

<p><img src="https://xiejava1018.github.io/xiejavaimagesrc/images/fullbug%E5%BE%AE%E4%BF%A1%E5%85%AC%E4%BC%97%E5%8F%B7.jpg" alt="“fullbug”微信公众号" title="“fullbug”微信公众号"> </p>
<p>关注：微信公众号,一起学习成长！</center></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://xiejava.ishareread.com/posts/db2fbb43/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="XieJava">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="https://img9.doubanio.com/icon/ul70489051-4.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="XieJava's blog">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/posts/db2fbb43/" itemprop="url">Python爬取京东商品评价信息实战</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2024-03-11T15:44:10+08:00">
                2024-03-11
              </time>
            

            
              <span class="post-meta-divider">|</span>
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-check-o"></i>
              </span>
              
                <span class="post-meta-item-text">更新于&#58;</span>
              
              <time title="更新于" itemprop="dateModified" datetime="2024-06-13T22:52:39+08:00">
                2024-06-13
              </time>
            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E6%8A%80%E6%9C%AF/" itemprop="url" rel="index">
                    <span itemprop="name">技术</span>
                  </a>
                </span>

                
                
                  ， 
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E6%8A%80%E6%9C%AF/%E5%BC%80%E5%8F%91/" itemprop="url" rel="index">
                    <span itemprop="name">开发</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/posts/db2fbb43/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count valine-comment-count" data-xid="/posts/db2fbb43/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          
             <span id="/posts/db2fbb43/" class="leancloud_visitors" data-flag-title="Python爬取京东商品评价信息实战">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">阅读次数&#58;</span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  1.2k
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">
                  5
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><img src="https://xiejava1018.github.io/xiejavaimagesrc/images/2024/20240311/0%E3%80%81%E7%BD%91%E7%BB%9C%E7%88%AC%E8%99%AB.png" alt="网络爬虫"></p>
<p>上期介绍了通过《<a href="http://xiejava.ishareread.com/posts/81e07ee2/" target="_blank" rel="noopener">mitmproxy实战-通过mitmdump爬取京东金榜数据</a>》，能够上京东金榜的商品一般评价都是比较好的，这次介绍如何爬取京东商品的评价信息。</p>
<h2 id="一、分析商品评价的页面信息"><a href="#一、分析商品评价的页面信息" class="headerlink" title="一、分析商品评价的页面信息"></a>一、分析商品评价的页面信息</h2><h3 id="1、请求参数分析"><a href="#1、请求参数分析" class="headerlink" title="1、请求参数分析"></a>1、请求参数分析</h3><p>京东的商品评价信息是在商品的详情页面，我们随便访问一个京东的商品详情页面如<a href="https://item.jd.com/100087971268.html" target="_blank" rel="noopener">https://item.jd.com/100087971268.html</a><br>在这里可以看到100087971268就是商品ID也是商品的skuId，这个是商品的唯一ID可以和很过信息关联。我们可以通过chrome浏览器的调试模式来分析商品评价信息的数据是如何获取和展示的。<br>通过chrome浏览器的调试模式可以看到，评价信息是通过<code>https://api.m.jd.com/?appid=item-v3&amp;functionId=pc_club_productPageComments&amp;client=pc&amp;clientVersion=1.0.0&amp;t=1710122207175&amp;loginType=3&amp;uuid=181111935.16953916127351737253418.1695391613.1709713566.1710121957.56&amp;productId=100087971268&amp;score=0&amp;sortType=5&amp;page=0&amp;pageSize=10&amp;isShadowSku=0&amp;fold=1&amp;bbtf=&amp;shield=</code><br>这个接口来返回的，其中关键的信息包括functionId=pc_club_productPageComments，productId=100087971268，page=0&amp;pageSize=10。<br><code>productId=100087971268</code>表示是获取商品ID为100087971268的商品评价，<code>page=0&amp;pageSize=10</code>表示当前页是0，每页显示10条记录。</p>
<p><img src="https://xiejava1018.github.io/xiejavaimagesrc/images/2024/20240311/1%E3%80%81%E5%95%86%E5%93%81%E8%AF%A6%E6%83%85%E9%A1%B5%E9%9D%A2%E5%88%86%E6%9E%90.png" alt="分析详情页"></p>
<h3 id="2、接口返回信息分析"><a href="#2、接口返回信息分析" class="headerlink" title="2、接口返回信息分析"></a>2、接口返回信息分析</h3><p>我们可以切换到Response的标签页，分析接口的返回信息</p>
<p><img src="https://xiejava1018.github.io/xiejavaimagesrc/images/2024/20240311/2%E3%80%81%E5%95%86%E5%93%81%E8%AF%84%E4%BB%B7%E6%8E%A5%E5%8F%A3%E8%BF%94%E5%9B%9E%E4%BF%A1%E6%81%AF%E5%88%86%E6%9E%90.png" alt="商品评价接口返回信息分析"></p>
<p>在这里可以看到通过接口反馈的是一个json格式的数据，其中评价信息就在comments的节点里，我们只要解析这个json就可以得到具体的评价信息了。<br>通过参数的分析和返回结果的分析后，就可以开始编码实现了。</p>
<h2 id="二、爬取京东商品评价信息代码实现"><a href="#二、爬取京东商品评价信息代码实现" class="headerlink" title="二、爬取京东商品评价信息代码实现"></a>二、爬取京东商品评价信息代码实现</h2><p>编码主要实现两个部分的内容<br>1、是要组织请求参数，将请求URL的一些参数用变量替换，如商品ID，当前页等。<br>2、是要解析返回的JSON数据，从JSON数据中解析获取需要的评价信息以及下载评价信息中的图片。<br>在组织请求参数的时候，有两个关键信息，一个是Cookie信息，一个是请求的URL，因为访问京东的接口要登录，所以需要Cookie的信息。这些信息都可以在登录到京东后在chrome浏览器的调试模式中可以拿到。</p>
<p><img src="https://xiejava1018.github.io/xiejavaimagesrc/images/2024/20240311/3%E3%80%81%E7%BB%84%E7%BB%87%E8%AF%B7%E6%B1%82%E5%8F%82%E6%95%B0.png" alt="组织请求参数"></p>
<h3 id="1、具体代码"><a href="#1、具体代码" class="headerlink" title="1、具体代码"></a>1、具体代码</h3><p><strong>具体代码如下：</strong><br>getJDProdComments.py</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> json</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">from</span> urllib.request <span class="keyword">import</span> urlretrieve</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line">sleeptime = <span class="number">1</span>  <span class="comment"># 休眠时间</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 浏览器访问伪装</span></span><br><span class="line">headers = &#123;</span><br><span class="line">    <span class="string">'cookie'</span>: <span class="string">'___jdu=16953916127351737253418; shshshfpa=423ebd76-fc1a-89d5-d47a-a981cedfdsf57-1686fds5177; shshshfpx=423ebd76-fc1a-89d5-d47a-a981ced31f57-1686405177; pinId=OlFK9xcJEZ3Ep3CJn7-LwLV9-x-f3wj7; pin=jd_5ab1043c91fdff; unick=xiejava; _tp=xRz2UIA0gXgQ0KtQA8IW%2BhMgOusl53MovCk%2FP0TxaIM%3D; _pst=jd_5ab1043c91bff; PCSYCityID=CN_430000_430100_0; areaId=18; ipLoc-djd=18-1482-48942-49058; b_dh=1179; b_dpr=1.100000023841858; b_webp=1; b_avif=1; autoOpenApp_downCloseDate_auto=1705396790105_1800000; b_dw=1555; __jdv=91748099|baidu|-|organic|notset|1705397493195; jsavif=1; mba_muid=16953916127351737253418; wlfstk_smdl=4d5qhwajihbur3xtxm1dghq2bwl9ebii; 3AB9D23F7A4B3C9B=ONVXQU6KOVA46KLMDJWYJ2CLCGZLCKH4NFEKT6ANBHIYQJBOWM3KHFJ3RT5NO6GKP2BQVONOJWLAKMJUMNJOAMEHJE; TrackID=1wLmzwr1GPygNiM7hoidalzvJbkLlnJRs7c_e2wlsv7h_VHaLyqnXTiW1_vIDBhlEusopAT977EO67KV2n2vMV9jMUQx8MO9jJQMMv8skxrE; thor=C1CD4973B7F47EE1FE45201B5AB2281DC485D58F5BD12AA8CEC6335A9B07F5E3F1BFD9D9DEA859A32AEDE0F33C45B55AA44327ACD87A8E174C645BE4BC987735B3DD969561D2D0AA492DD1FEC1A793AF265724B02F9850F35F0CA58E8E4A5A3C212B0734C80AD560D299EC59026506C127E953C92D271932DDDBF32BEC59091745A6CB143671358CC8A866B9A298AA865F60B9AC41AD05C6EB6781C131BD05DD; flash=2_7Kqrs87KZ1MjgKXGB8QJTs9NjTmYiJCdEV8xYwXCMezATHn-bD7kirFJuQx5ogyzo_yuQHefS-MTOx8D5rxn-5ZxA8-qMHyBfYw-1ULH1bq*; ceshi3.com=103; __jdc=181111935; token=7482844f43473090375d99ad860b4294,3,947486; __tk=mLVlrKTimJznoD3PmcVvYmZmldTlkbVaommnjmTankZOmmPDolZTZmTfSJvkYRmblDzYrLKC,3,947486; shshshsID=a8f2acdf15967d81d4c5d8b5a45b7796_1_1705476526446; 3AB9D23F7A4B3CSS=jdd03ONVXQU6KOVA46KLMDJWYJ2CLCGZLCKH4NFEKT6ANBHIYQJBOWM3KHFJ3RT5NO6GKP2BQVONOJWLAKMJUMNJOAMEHJEAAAAMNCZJJB5QAAAAAD26SPFPWINAFQMX; _gia_d=1; shshshfpb=BApXeNARaFehAyBNmDl1nYWazwPZ1Fa6NB8QBVlhW9xJ1Mt5if4S2; __jda=181111935.16953916127351737253418.1695391613.1705471486.1705476528.12; __jdb=181111935.1.16953916127351737253418|12.1705476528; joyya=1705472508.1705476529.27.0u3hno2'</span>,</span><br><span class="line">    <span class="string">'referer'</span>: <span class="string">'https://item.jd.com/'</span>,</span><br><span class="line">    <span class="string">'user-agent'</span>: <span class="string">'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/91.0.4472.77 Safari/537.36 Edg/91.0.864.37'</span>,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">jd_prod_pic_save_path = <span class="string">'jd_prod_pic'</span>  <span class="comment"># 图片保存目录</span></span><br><span class="line"></span><br><span class="line">page_range = <span class="number">50</span>   <span class="comment"># 翻50页取500条记录</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">getJDProdComment</span><span class="params">(prod_skuId)</span>:</span></span><br><span class="line">    big_pag_path = <span class="string">'//img30.360buyimg.com/shaidan/s616x405_jfs/'</span>  <span class="comment"># 评价大图地址</span></span><br><span class="line">    tiny_pag_path = <span class="string">'//img30.360buyimg.com/n0/s128x96_jfs/'</span>       <span class="comment"># 评价缩略图地址</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(page_range):</span><br><span class="line">        comments_url = <span class="string">'https://api.m.jd.com/?appid=item-v3&amp;functionId=pc_club_productPageComments&amp;client=pc&amp;clientVersion=1.0.0&amp;t=1705853247039&amp;loginType=3&amp;uuid=181111935.16953916127351737253418.1695391613.1705847111.1705852812.35&amp;productId='</span>+str(prod_skuId)+<span class="string">'&amp;score=0&amp;sortType=5&amp;page='</span>+str(i)+<span class="string">'&amp;pageSize=10&amp;isShadowSku=0&amp;fold=1&amp;bbtf=&amp;shield='</span></span><br><span class="line">        data = requests.get(comments_url, headers=headers)</span><br><span class="line">        <span class="keyword">if</span> data:</span><br><span class="line">            content_data=data.content.decode(<span class="string">'utf-8'</span>)</span><br><span class="line">            json_data=json.loads(content_data)</span><br><span class="line">            print(json_data)</span><br><span class="line">            <span class="keyword">if</span> i == <span class="number">0</span>:</span><br><span class="line">                productCommentSummary=json_data.get(<span class="string">'productCommentSummary'</span>)</span><br><span class="line">                print(prod_skuId, str(productCommentSummary))</span><br><span class="line">                hotCommentTagStatistics=json_data.get(<span class="string">'hotCommentTagStatistics'</span>)</span><br><span class="line">                print(prod_skuId,str(hotCommentTagStatistics))</span><br><span class="line">            comments=json_data.get(<span class="string">'comments'</span>)</span><br><span class="line">            <span class="keyword">if</span> comments <span class="keyword">and</span> len(comments)&gt;<span class="number">0</span>:</span><br><span class="line">                <span class="keyword">for</span> comment <span class="keyword">in</span> comments:</span><br><span class="line">                    prod_comment_guid=comment.get(<span class="string">'guid'</span>)</span><br><span class="line">                    prod_comment_content=str(comment.get(<span class="string">'content'</span>))</span><br><span class="line">                    prod_comment=str(comment)</span><br><span class="line">                    images=comment.get(<span class="string">'images'</span>)</span><br><span class="line">                    savepath=os.path.join(jd_prod_pic_save_path,str(prod_skuId),<span class="string">'comments'</span>,prod_comment_guid)</span><br><span class="line">                    <span class="keyword">if</span> images <span class="keyword">and</span> len(images)&gt;<span class="number">0</span>:</span><br><span class="line">                        <span class="keyword">for</span> image <span class="keyword">in</span> images:</span><br><span class="line">                            str_image_url=image.get(<span class="string">'imgUrl'</span>).replace(tiny_pag_path, big_pag_path)</span><br><span class="line">                            image_url=<span class="string">'https:'</span>+str_image_url</span><br><span class="line">                            filename=os.path.basename(image_url)</span><br><span class="line">                            downloadfile(image_url, savepath, filename) <span class="comment">#下载图片</span></span><br><span class="line">                            time.sleep(sleeptime)</span><br><span class="line">                    print(prod_comment_guid,prod_skuId,prod_comment_content,prod_comment)</span><br><span class="line">            time.sleep(sleeptime)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">downloadfile</span><span class="params">(downloadurl,savepath,savefilename)</span>:</span></span><br><span class="line">    savefile = os.path.join(savepath, savefilename)</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> os.path.exists(savepath):</span><br><span class="line">            os.makedirs(savepath)</span><br><span class="line">            <span class="comment"># 判断文件是否存在，如果不存在则下载</span></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> os.path.isfile(savefile):</span><br><span class="line">            print(<span class="string">'Downloading data from %s'</span> % downloadurl)</span><br><span class="line">            urlretrieve(downloadurl, filename=savefile)</span><br><span class="line">            print(<span class="string">'\nDownload finished!'</span>)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            print(<span class="string">'File already exsits!'</span>)</span><br><span class="line">        <span class="comment"># 获取文件大小</span></span><br><span class="line">        filesize = os.path.getsize(savefile)</span><br><span class="line">        <span class="comment"># 文件大小默认以Bytes计， 转换为Mb</span></span><br><span class="line">        print(<span class="string">'File size = %.2f Mb'</span> % (filesize / <span class="number">1024</span> / <span class="number">1024</span>))</span><br><span class="line">    <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">        print(<span class="string">'downloadfile Error:'</span>, e)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    getJDProdComment(<span class="string">'100087971268'</span>)</span><br></pre></td></tr></table></figure>

<p>以上代码中的Cookie信息，需要根据自己登录后从chrome浏览器的调试模式中拿到的Cookie信息替换。</p>
<h3 id="2、运行效果"><a href="#2、运行效果" class="headerlink" title="2、运行效果"></a>2、运行效果</h3><p><strong>运行效果：</strong></p>
<p><img src="https://xiejava1018.github.io/xiejavaimagesrc/images/2024/20240311/4%E3%80%81%E8%BF%90%E8%A1%8C%E6%95%88%E6%9E%9C.png" alt="运行效果"></p>
<hr>
<p>作者博客：<a href="http://xiejava.ishareread.com/" target="_blank" rel="noopener">http://xiejava.ishareread.com/</a></p>
<center> 

<br>

<p><img src="https://xiejava1018.github.io/xiejavaimagesrc/images/fullbug%E5%BE%AE%E4%BF%A1%E5%85%AC%E4%BC%97%E5%8F%B7.jpg" alt="“fullbug”微信公众号" title="“fullbug”微信公众号"> </p>
<p>关注：微信公众号,一起学习成长！</center></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://xiejava.ishareread.com/posts/eed12364/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="XieJava">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="https://img9.doubanio.com/icon/ul70489051-4.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="XieJava's blog">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/posts/eed12364/" itemprop="url">数据安全之认识数据库漏洞扫描系统</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2024-03-07T10:17:00+08:00">
                2024-03-07
              </time>
            

            
              <span class="post-meta-divider">|</span>
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-check-o"></i>
              </span>
              
                <span class="post-meta-item-text">更新于&#58;</span>
              
              <time title="更新于" itemprop="dateModified" datetime="2024-06-13T22:52:38+08:00">
                2024-06-13
              </time>
            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E6%8A%80%E6%9C%AF/" itemprop="url" rel="index">
                    <span itemprop="name">技术</span>
                  </a>
                </span>

                
                
                  ， 
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E6%8A%80%E6%9C%AF/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8/" itemprop="url" rel="index">
                    <span itemprop="name">网络安全</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/posts/eed12364/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count valine-comment-count" data-xid="/posts/eed12364/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          
             <span id="/posts/eed12364/" class="leancloud_visitors" data-flag-title="数据安全之认识数据库漏洞扫描系统">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">阅读次数&#58;</span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  5k
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">
                  16
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>随着信息技术的迅猛发展和互联网的普及，数据库作为存储、管理和检索大量数据的关键组件，其安全性对于企业和组织来说至关重要。然而，由于网络环境的复杂性和攻击手段的多样性，数据库面临着越来越多的安全威胁。黑客可能利用已知的漏洞或弱点，对数据库进行非法访问、数据窃取或篡改，从而给企业和组织带来巨大的经济损失和声誉风险。</p>
<p>为了应对这些安全挑战，数据库漏洞扫描系统应运而生。该系统基于漏洞数据库，通过扫描等手段对指定的远程或本地计算机系统的安全脆弱性进行检测，发现可利用的漏洞。它能够帮助企业和组织及时发现并修复数据库中的安全漏洞，提高数据库的安全防护能力，降低潜在的安全风险。</p>
<p>本文让我们一起来认识一下数据库漏洞扫描系统。</p>
<h2 id="一、什么是数据库漏洞扫描系统"><a href="#一、什么是数据库漏洞扫描系统" class="headerlink" title="一、什么是数据库漏洞扫描系统"></a>一、什么是数据库漏洞扫描系统</h2><p>数据库漏洞扫描系统是一种专业的数据库安全产品，它基于对数据库访问控制、数据库审计、资源管理、数据库加密以及数据库系统本身安全机制的深入分析，深入研究和发现数据库系统本身存在的BUG以及数据库管理、使用中存在的问题。</p>
<p>该系统的核心功能在于对数据库系统进行自动化安全评估。通过读取数据库的信息与安全策略进行综合分析，能够充分扫描出数据库系统的安全漏洞和威胁，并自动给出详细的漏洞描述、漏洞来源及修复建议。此外，它还提供智能的修复建议和完整的数据库漏洞报告、数据库安全评估报告，帮助用户进行漏洞修复，从而保护数据库的安全。</p>
<p>数据库漏洞扫描系统的主要特性之一是拥有全面的漏洞库，支持CVE、CNNVD等披露的数据库安全漏洞，并按高、中、低、信息四个级别进行不同层级的漏洞威胁排列。这使得系统能够更准确地识别和评估数据库中的安全风险。</p>
<p>数据库漏洞扫描系统是数据库安全评估工具之一，能够找出数据库自身的安全漏洞和使用中的安全隐患。</p>
<h2 id="二、数据库漏洞扫描系统的发展历程"><a href="#二、数据库漏洞扫描系统的发展历程" class="headerlink" title="二、数据库漏洞扫描系统的发展历程"></a>二、数据库漏洞扫描系统的发展历程</h2><p>数据库漏洞扫描系统的发展历程是一个伴随着数据库技术、网络安全威胁以及信息技术发展的不断演进过程。<br>在早期，数据库的安全主要依赖于基本的访问控制和加密技术，但随着网络攻击手段的不断升级和复杂化，传统的安全措施已经无法满足需求。因此，对数据库进行漏洞扫描和风险评估的需求逐渐凸显。</p>
<p>随着技术的发展，数据库漏洞扫描系统开始兴起。这些系统能够自动化地检测数据库中的安全漏洞，提供修复建议，并帮助用户保持数据库的安全健康状态。它们基于漏洞数据库，通过扫描等手段对指定的远程或本地计算机系统的安全脆弱性进行检测，发现可利用的漏洞。</p>
<p>随着时间的推移，数据库漏洞扫描系统不断发展和完善。它们不仅支持更多的数据库类型和版本，还提供了更全面的漏洞检测和修复建议。此外，一些高级的数据库漏洞扫描系统还具备了合规性检查、弱口令检测等功能，能够更好地满足用户的安全需求。</p>
<p>近年来，随着云计算、大数据、人工智能等技术的快速发展，数据库漏洞扫描系统也迎来了新的发展机遇。通过集成这些先进技术，数据库漏洞扫描系统能够更加高效、准确地发现安全漏洞，提供更为智能的修复方案，为用户的数据库安全保驾护航。</p>
<p>数据库漏洞扫描系统的发展历程是一个不断进步和完善的过程，它随着数据库技术和网络安全威胁的发展而不断演进，为用户提供更加全面、高效的安全保障。</p>
<h2 id="三、数据库漏洞扫描系统的主要功能"><a href="#三、数据库漏洞扫描系统的主要功能" class="headerlink" title="三、数据库漏洞扫描系统的主要功能"></a>三、数据库漏洞扫描系统的主要功能</h2><p>数据库漏洞扫描系统具备多种功能，这些功能共同协作，以全面评估数据库的安全性并发现潜在的安全风险。主要功能包括：</p>
<ol>
<li>漏洞检测与发现：这是数据库漏洞扫描系统的核心功能。它能够扫描并检测数据库系统中的各种漏洞，包括已知和未知的漏洞。这些漏洞可能涉及SQL注入、跨站脚本攻击（XSS）、未授权访问等安全风险。</li>
<li>安全风险评估：在发现漏洞后，系统能够对这些漏洞进行风险评估，判断其可能对数据库系统造成的潜在影响。这有助于用户优先处理那些风险较高的漏洞。</li>
<li>修复建议与报告：基于漏洞检测和风险评估的结果，系统能够生成详细的修复建议和报告。这些建议通常包括如何修复漏洞、加强数据库安全配置、更新补丁等，帮助用户及时消除潜在的安全风险。</li>
<li>多平台与多数据库支持：系统需要支持多种操作系统和数据库管理系统，以确保无论用户使用的是哪种数据库或操作系统，都能进行有效的扫描和评估。</li>
<li>自定义扫描策略：系统应允许用户定义自定义的扫描策略，以满足特定的安全需求和环境。这可以包括扫描的深度、范围、时间等参数的设置。</li>
<li>定期扫描与监控：数据库漏洞扫描系统还应具备定期扫描和监控功能，以便及时发现并处理新的安全威胁。这有助于保持数据库系统的持续安全性。</li>
</ol>
<h2 id="四、数据库漏洞扫描系统的基本原理"><a href="#四、数据库漏洞扫描系统的基本原理" class="headerlink" title="四、数据库漏洞扫描系统的基本原理"></a>四、数据库漏洞扫描系统的基本原理</h2><p>数据库漏洞扫描系统的原理基于自动化的安全测试技术，用于检测数据库系统中存在的潜在安全漏洞。以下是该系统的基本原理：</p>
<ol>
<li>信息收集：首先，扫描系统会对目标数据库进行信息收集。这包括获取数据库的类型、版本、配置信息，以及运行的操作系统和服务等。这些信息有助于确定扫描的范围和策略，以及为后续的漏洞检测提供基础数据。</li>
<li>漏洞检测规则：系统内置了大量的漏洞检测规则，这些规则是根据已知的安全漏洞和攻击手法编写的。这些规则可能涉及SQL注入、跨站脚本攻击（XSS）、权限提升等常见的数据库安全威胁。</li>
<li>扫描与测试：利用上述的漏洞检测规则，扫描系统会对数据库进行深入的扫描和测试。这可能包括发送特定的查询请求到数据库，观察和分析数据库的响应，以及尝试利用潜在的漏洞。</li>
<li>漏洞验证：当扫描系统发现潜在的漏洞时，它会尝试进一步验证这些漏洞的存在和利用性。这通常涉及更复杂的测试和攻击模拟，以确保检测到的漏洞是真实存在的，并且可以被攻击者利用。</li>
<li>报告与修复建议：最后，扫描系统会生成详细的漏洞报告，列出所有检测到的漏洞及其严重程度。同时，系统还会提供修复建议，帮助数据库管理员或安全专家及时修复这些漏洞，提高数据库的安全性。</li>
</ol>
<p>需要注意的是，数据库漏洞扫描系统虽然功能强大，但也存在一定的局限性。它可能无法检测到所有类型的漏洞，特别是那些新出现或特定环境下的漏洞。此外，系统的准确性和可靠性也受到多种因素的影响，如扫描策略的选择、数据库环境的复杂性等。因此，在使用数据库漏洞扫描系统时，需要结合其他安全措施和人工分析，以确保数据库的安全性。</p>
<h2 id="五、为什么企业需要数据库漏洞扫描系统"><a href="#五、为什么企业需要数据库漏洞扫描系统" class="headerlink" title="五、为什么企业需要数据库漏洞扫描系统"></a>五、为什么企业需要数据库漏洞扫描系统</h2><p>黑客常利用数据库的各种漏洞来对数据库进行攻击，例如数据库用户密码的脆弱性，非法的远程连接，数据库用户占用CPU会话数过多等。对于不同的数据库，漏洞也不同。如：目前oracle数据库的漏洞就有超过1000项，SQL Server有超过500项。只要一个漏洞被黑客利用，数据库就有被破坏的危险。还有一点也很重要，操作系统安全不能说明数据库是安全的。辟如我们目前使用的数据库大部分都是关系型数据库，而关系型数据库一般都是通过端口的方式来进行访问的，这种访问方式是可以绕开操作系统的验证的。</p>
<p>企业之所以需要数据库漏洞扫描系统，主要基于以下几个方面的原因：</p>
<ol>
<li>识别与修复安全漏洞：数据库是企业存储关键信息和数据的核心组件，其安全性至关重要。然而，由于软件研发过程中可能存在的普遍问题，如引用第三方开源代码和运行环境的不确定性，数据库可能面临各种已知和未知的漏洞。数据库漏洞扫描系统能够自动化地扫描数据库，识别出潜在的安全漏洞，并提供修复建议。这有助于企业及时发现并修复安全漏洞，降低资产风险。</li>
<li>满足法律合规要求：在数字化时代，网络安全等级保护等法规要求企业对其信息系统进行安全漏洞的检测和修补。数据库漏洞扫描系统能够帮助企业满足这些法律合规要求，确保企业信息系统的安全。</li>
<li>提高安全管理效率：传统的安全管理方式可能耗时且效率低下，而数据库漏洞扫描系统能够自动化执行漏洞扫描，大大提高安全检测的效率和准确性。同时，系统还能提供针对性的安全建议，帮助企业优化其安全策略和措施，从而进一步提高网络安全水平。</li>
<li>增强品牌声誉和客户信任：通过及时发现并修复数据库的安全漏洞，企业能够防止数据泄露和系统崩溃等安全事件的发生，从而保护客户信息的安全。这有助于增强客户对企业的信任，提高品牌声誉，为企业赢得更多的商业机会。</li>
</ol>
<p>综上所述，企业在日常运营中应充分考虑引入并使用数据库漏洞扫描系统。</p>
<h2 id="六、数据库漏洞扫描系统的部署方式"><a href="#六、数据库漏洞扫描系统的部署方式" class="headerlink" title="六、数据库漏洞扫描系统的部署方式"></a>六、数据库漏洞扫描系统的部署方式</h2><p>数据库漏洞扫描系统的部署方式主要可以分为以下几种：</p>
<ol>
<li>网络集成部署：这种方式是将数据库漏洞扫描系统部署在网络中的某个节点，使其能够与网络中的数据库进行通信并执行扫描任务。这种部署方式通常需要对网络架构进行一定的配置，以确保扫描系统能够顺利访问目标数据库。</li>
<li>分布式部署：对于大型网络或分布式数据库环境，可以采用分布式部署方式。这意味着在多个网络节点或数据库服务器上部署扫描系统的组件，以实现并行扫描和集中管理。这种部署方式可以提高扫描效率，并更好地适应复杂网络环境的需求。</li>
<li>独立部署：在某些情况下，数据库漏洞扫描系统可以独立部署在单个设备或服务器上。这种方式适用于对特定数据库或特定环境进行单独的扫描任务。独立部署可以确保扫描系统的独立性和安全性，避免与其他系统或网络产生冲突。</li>
</ol>
<p>需要注意的是，具体的部署方式应根据实际情况和需求进行选择。在选择部署方式时，需要考虑网络架构、数据库类型、扫描需求以及安全性等因素。同时，部署过程中需要确保遵循相关的安全标准和最佳实践，以确保扫描系统的正常运行和数据的安全性。</p>
<h2 id="七、为什么系统漏洞扫描-网络漏洞扫描系统不能代替数据库漏洞扫描系统？"><a href="#七、为什么系统漏洞扫描-网络漏洞扫描系统不能代替数据库漏洞扫描系统？" class="headerlink" title="七、为什么系统漏洞扫描/网络漏洞扫描系统不能代替数据库漏洞扫描系统？"></a>七、为什么系统漏洞扫描/网络漏洞扫描系统不能代替数据库漏洞扫描系统？</h2><p>系统漏洞扫描系统是检查操作系统中存在的漏洞，其扫描对象是操作系统，操作系统是大型数据库系统的运行平台，为数据库系统提供一定程度的安全保护。但是当入侵是通过数据库开放的端口进行时，操作系统就无能为力了。</p>
<p>网络漏洞扫描系统是一种基于网络的漏洞扫描和分析工具软件，能够自动检查主机、网络设备的安全漏洞。系统管理员利用漏洞扫描技术对局域网络、Web站点、主机操作系统、系统服务以及防火墙系统的安全漏洞进行扫描，可以能够及时发现网络漏洞并在网络攻击者扫描和利用之前予以修补，从而提高网络的安全。</p>
<p>相比之下，数据库漏洞扫描系统专门针对数据库进行安全检测。数据库系统的安全性很大程度上是依赖于数据库管理系统。如果数据库管理系统的安全机制非常强大，则数据库系统的安全性能就较好。数据库漏洞扫描系统它能够识别数据库中的安全漏洞，包括SQL注入、未授权访问等数据库特有的安全威胁。此外，数据库漏洞扫描系统还能评估数据库的配置和权限设置，发现潜在的安全风险，并提供相应的修复建议。</p>
<p>虽然系统漏洞扫描和网络漏洞扫描系统能够提升整体网络安全水平，但它们无法替代数据库漏洞扫描系统在数据库安全方面的专业性和深入性。为了全面保障网络安全，需要综合运用多种扫描系统，从多个层面进行安全检测和防护。</p>
<h2 id="八、数据库漏洞扫描系统的局限性和挑战"><a href="#八、数据库漏洞扫描系统的局限性和挑战" class="headerlink" title="八、数据库漏洞扫描系统的局限性和挑战"></a>八、数据库漏洞扫描系统的局限性和挑战</h2><p>数据库漏洞扫描系统能够发现数据库中的安全漏洞并提供修复建议，但也存在一些局限性和挑战。如：</p>
<ol>
<li>无法检测所有漏洞：尽管数据库漏洞扫描系统可以检测大量的已知漏洞，但它可能无法检测到所有类型的漏洞。特别是对于那些新出现的、未知的或者特定环境下的漏洞，系统可能无法进行有效识别。</li>
<li>误报和漏报的可能性：在某些情况下，系统可能会误报一些并非真正存在的漏洞，或者漏报一些实际存在的安全风险。这可能是由于扫描过程中的一些技术限制或者环境差异导致的。</li>
<li>依赖于数据库的配合：数据库漏洞扫描系统通常需要数据库的配合才能进行完整的扫描。如果数据库管理员不提供足够的权限或者对扫描过程进行限制，系统可能无法全面评估数据库的安全性。</li>
<li>需要人工分析和判断：尽管系统可以生成详细的漏洞报告和修复建议，但最终的决策和修复工作仍然需要由数据库管理员或安全专家来执行。因此，对人员的专业技能和经验有一定要求。</li>
<li>对复杂环境的挑战：在复杂的数据库环境中，如分布式数据库、云数据库等，数据库漏洞扫描系统可能面临更大的挑战。这些环境可能涉及多个组件、网络和安全策略，使得扫描和评估过程更加复杂和困难。</li>
</ol>
<p>针对以上挑战，数据库漏洞扫描系统的发展趋势主要体现在以下几个方面：</p>
<ol>
<li>技术集成与智能化：随着人工智能、大数据等技术的快速发展，数据库漏洞扫描系统将更加注重技术的集成和智能化。例如，通过集成机器学习和深度学习算法，系统能够更精准地识别和分析漏洞，提供更为智能化的修复建议。</li>
<li>云化与平台化：云计算的普及使得越来越多的应用和服务迁移到云端。因此，数据库漏洞扫描系统也将逐步云化，为用户提供更为便捷、灵活的服务。同时，平台化也是一个重要的发展趋势，通过构建统一的安全管理平台，实现多种安全工具和服务的集成和协同。</li>
<li>全面性与精细化：随着数据库类型的多样化和复杂性的增加，数据库漏洞扫描系统需要支持更多的数据库类型和版本，并提供更为全面和精细化的漏洞检测。这意味着系统需要不断更新和优化漏洞数据库，提高检测的准确性和效率。</li>
<li>合规性与标准化：随着网络安全法规的不断完善，数据库漏洞扫描系统需要更加注重合规性和标准化。系统需要能够按照相关法规和标准进行检测和报告，帮助企业满足法律合规要求。</li>
<li>自动化与响应式安全：自动化是数据库漏洞扫描系统的重要发展方向。通过实现自动化的扫描、分析和修复流程，可以大大提高安全管理的效率。同时，响应式安全也是未来的一个关键趋势，系统需要能够实时监测数据库的安全状况，对新的漏洞和威胁进行快速响应。</li>
</ol>
<p>综上所述，数据库漏洞扫描系统的发展趋势是多元化、集成化、云化、平台化、全面化、精细化、合规化、自动化和响应式安全。这些趋势将有助于提升数据库漏洞扫描系统的性能和功能，为企业提供更为全面、高效和智能的安全保障。</p>
<hr>
<p>作者博客：<a href="http://xiejava.ishareread.com/" target="_blank" rel="noopener">http://xiejava.ishareread.com/</a></p>
<center> 
<br>

<p><img src="https://xiejava1018.github.io/xiejavaimagesrc/images/fullbug%E5%BE%AE%E4%BF%A1%E5%85%AC%E4%BC%97%E5%8F%B7.jpg" alt="“fullbug”微信公众号" title="“fullbug”微信公众号"> </p>
<p>关注：微信公众号,一起学习成长！</center></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://xiejava.ishareread.com/posts/81e07ee2/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="XieJava">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="https://img9.doubanio.com/icon/ul70489051-4.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="XieJava's blog">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/posts/81e07ee2/" itemprop="url">mitmproxy实战-通过mitmdump爬取京东金榜排行数据</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2024-03-04T14:09:45+08:00">
                2024-03-04
              </time>
            

            
              <span class="post-meta-divider">|</span>
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-check-o"></i>
              </span>
              
                <span class="post-meta-item-text">更新于&#58;</span>
              
              <time title="更新于" itemprop="dateModified" datetime="2024-06-13T22:52:38+08:00">
                2024-06-13
              </time>
            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E6%8A%80%E6%9C%AF/" itemprop="url" rel="index">
                    <span itemprop="name">技术</span>
                  </a>
                </span>

                
                
                  ， 
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E6%8A%80%E6%9C%AF/%E5%BC%80%E5%8F%91/" itemprop="url" rel="index">
                    <span itemprop="name">开发</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/posts/81e07ee2/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count valine-comment-count" data-xid="/posts/81e07ee2/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          
             <span id="/posts/81e07ee2/" class="leancloud_visitors" data-flag-title="mitmproxy实战-通过mitmdump爬取京东金榜排行数据">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">阅读次数&#58;</span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  1.4k
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">
                  5
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><img src="https://xiejava1018.github.io/xiejavaimagesrc/images/2024/20240304/0-mitmproxy.jpg" alt="mitmproxy"></p>
<p>对于APP的数据爬取或需要构建复杂的接口参数数据的爬取可以通过mitmproxy抓包还原流量，解析流量数据包来获取。mitmproxy是一个免费的开源交互式的HTTPS代理工具。它类似于其他抓包工具如WireShark和Fiddler，支持抓取HTTP和HTTPS协议的数据包，并可以通过控制台形式进行操作。mitmproxy具有两个非常有用的组件：mitmdump和mitmweb。mitmdump是mitmproxy的命令行接口，可以直接抓取请求数据。</p>
<p>本文介绍通过通过mitmdump爬取京东金榜数据。</p>
<p>京东金榜只有H5小程序和京东APP才有，用直接http请求来爬取数据很麻烦需要找到相应的接口构建很复杂的参数。通过mitmproxy代理抓包，从流量包中解析需要的数据相对来说要容易得多。</p>
<h2 id="一、准备工作"><a href="#一、准备工作" class="headerlink" title="一、准备工作"></a>一、准备工作</h2><p>安装mitmproxy并配置客户端。具体步骤见<a href="http://xiejava.ishareread.com/posts/699b1506/" target="_blank" rel="noopener">《mitmproxy安装与配置》</a><br>如果需要通过APP爬取，需要安装APP的模拟器，这里推荐用夜神模拟器。<br>启动模拟器后APP的网络配置一样的要配置通过mitmproxy的代理，因为APP一般都是通过HTTPS访问的，还需要安装证书。</p>
<h3 id="1、模拟器安卓操作系统安装证书"><a href="#1、模拟器安卓操作系统安装证书" class="headerlink" title="1、模拟器安卓操作系统安装证书"></a>1、模拟器安卓操作系统安装证书</h3><p>夜神模拟器可以直击访问本地的windows目录和模拟器的安卓目录，我们需要将mitmproxy的安卓证书传输到模拟器的安卓文件夹，点击夜神模拟器的文件助手<br><img src="https://xiejava1018.github.io/xiejavaimagesrc/images/2024/20240304/1-%E5%A4%9C%E7%A5%9E%E6%96%87%E4%BB%B6%E5%8A%A9%E6%89%8B.png" alt="夜神模拟器的文件助手"></p>
<p>将mitmproxy的安卓证书传到安卓端。<br><img src="https://xiejava1018.github.io/xiejavaimagesrc/images/2024/20240304/2-%E4%BC%A0%E8%BE%93mitmproxy%E7%9A%84%E5%AE%89%E5%8D%93%E8%AF%81%E4%B9%A6.png" alt="将mitmproxy的安卓证书传到安卓端"></p>
<p>安装证书：  安卓模拟器–&gt;设置–&gt;安全–&gt;从SD卡安装<br><img src="https://xiejava1018.github.io/xiejavaimagesrc/images/2024/20240304/3-%E5%AE%89%E8%A3%85%E8%AF%81%E4%B9%A6.png" alt="安装证书"></p>
<p>选择开始传到安卓文件夹中的证书文件<br><img src="https://xiejava1018.github.io/xiejavaimagesrc/images/2024/20240304/4-%E9%80%89%E6%8B%A9%E8%AF%81%E4%B9%A6.png" alt="选择证书文件"></p>
<p>输入PIN码<br><img src="https://xiejava1018.github.io/xiejavaimagesrc/images/2024/20240304/5-%E8%BE%93%E5%85%A5PIN%E7%A0%81.png" alt="输入PIN码"></p>
<p>为证书取个名字如mitmproxy，点击确定就可以了<br><img src="https://xiejava1018.github.io/xiejavaimagesrc/images/2024/20240304/6-%E8%AF%81%E4%B9%A6%E5%91%BD%E5%90%8D.png" alt="证书命名"></p>
<p>查看证书可以点击“用户凭据”<br><img src="https://xiejava1018.github.io/xiejavaimagesrc/images/2024/20240304/7-%E6%9F%A5%E7%9C%8B%E8%AF%81%E4%B9%A6.png" alt="查看证书"></p>
<p>可以看到mitmproxy的CA证书已经安装好了。<br><img src="https://xiejava1018.github.io/xiejavaimagesrc/images/2024/20240304/8-%E9%AA%8C%E8%AF%81%E8%AF%81%E4%B9%A6.png" alt="确认证书"></p>
<h3 id="2、模拟器安卓操作系统配置代理"><a href="#2、模拟器安卓操作系统配置代理" class="headerlink" title="2、模拟器安卓操作系统配置代理"></a>2、模拟器安卓操作系统配置代理</h3><p>安装好了CA证书，还要配置模拟器安卓操作系统的网络代理。<br>点击模拟其中的无线和网络中的WLAN<br><img src="https://xiejava1018.github.io/xiejavaimagesrc/images/2024/20240304/9-%E8%AE%BE%E7%BD%AEwlan%E7%BD%91%E7%BB%9C.png" alt="设置网络"></p>
<p>选择默认的无线连接WiredSSID在弹出的菜单中选择“修改网络”<br><img src="https://xiejava1018.github.io/xiejavaimagesrc/images/2024/20240304/10-%E4%BF%AE%E6%94%B9%E7%BD%91%E7%BB%9C.png" alt="修改网络"></p>
<p>设置mitmproxy的服务器主机IP和代理服务器端口，服务器主机IP就是宿主机windows主机的IP，端口就是起mitmproxy服务的端口。<br><img src="https://xiejava1018.github.io/xiejavaimagesrc/images/2024/20240304/11-%E8%AE%BE%E7%BD%AEmitmproxy%E4%BB%A3%E7%90%86.png" alt="设置代理"></p>
<p>mitmproxy和模拟器都准备好以后就可以分析京东金榜的数据了。</p>
<h2 id="二、分析数据"><a href="#二、分析数据" class="headerlink" title="二、分析数据"></a>二、分析数据</h2><p>京东金榜H5小程序的地址是 <a href="https://h5.m.jd.com/babelDiy/Zeus/32xRoXWmepbBVHfDMoHMw2kGfHdF/index.html" target="_blank" rel="noopener">https://h5.m.jd.com/babelDiy/Zeus/32xRoXWmepbBVHfDMoHMw2kGfHdF/index.html</a><br>我们可以用浏览器访问这个地址来分析需要爬取数据的接口和相应返回的数据格式。在这里可以到到京东金榜的数据接口是<a href="https://api.m.jd.com/client.action，通过POST请求来获取的金榜数据。" target="_blank" rel="noopener">https://api.m.jd.com/client.action，通过POST请求来获取的金榜数据。</a><br><img src="https://xiejava1018.github.io/xiejavaimagesrc/images/2024/20240304/12-%E5%88%86%E6%9E%90%E6%8E%A5%E5%8F%A3.png" alt="分析接口"></p>
<p>通过Preview仔细分析数据接口返回的金榜数据的JSON格式<br><img src="https://xiejava1018.github.io/xiejavaimagesrc/images/2024/20240304/13-%E5%88%86%E6%9E%90%E6%8E%A5%E5%8F%A3%E6%95%B0%E6%8D%AE.png" alt="分析数据"></p>
<p>接下来我们就要根据接口和JSON格式的数据来写代码获取并解析相应的数据信息。</p>
<h2 id="三、爬取数据"><a href="#三、爬取数据" class="headerlink" title="三、爬取数据"></a>三、爬取数据</h2><p>在这里我们通过response接口获取通过mitmproxy代理后的流量进行解析，实现对京东金榜数据的获取。爬取数据的jdrank_scripts.py具体代码如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> json</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">response</span><span class="params">(flow)</span>:</span></span><br><span class="line">    url = <span class="string">'https://api.m.jd.com/client.action'</span></span><br><span class="line">    <span class="keyword">if</span> flow.request.url.startswith(url):</span><br><span class="line">        text = flow.response.text</span><br><span class="line">        json_data = json.loads(text)</span><br><span class="line">        <span class="comment">#print(json_data)</span></span><br><span class="line">        <span class="comment">#获取金榜排行</span></span><br><span class="line">        <span class="keyword">if</span> (<span class="string">'result'</span> <span class="keyword">in</span> json_data) <span class="keyword">and</span> (<span class="string">'tabs'</span> <span class="keyword">in</span> json_data[<span class="string">'result'</span>]):</span><br><span class="line">            getMainGoldRank(json_data)</span><br><span class="line">        <span class="comment">#获取金榜排行商品列表</span></span><br><span class="line">        <span class="keyword">if</span> (<span class="string">'result'</span> <span class="keyword">in</span> json_data) <span class="keyword">and</span> (<span class="string">'mainRank'</span> <span class="keyword">in</span> json_data[<span class="string">'result'</span>]):</span><br><span class="line">            getJDProductInfo(json_data)</span><br><span class="line">    <span class="comment">#获取商品信息</span></span><br><span class="line">    <span class="keyword">if</span> flow.request.url.startswith(url):</span><br><span class="line">        text = flow.response.text</span><br><span class="line">        json_data = json.loads(text)</span><br><span class="line">        <span class="keyword">if</span> (<span class="string">'floors'</span> <span class="keyword">in</span> json_data) <span class="keyword">and</span> len(json_data[<span class="string">'floors'</span>])&gt;<span class="number">1</span>:</span><br><span class="line">            prod_skuId=json_data[<span class="string">'floors'</span>][<span class="number">0</span>].get(<span class="string">'data'</span>).get(<span class="string">'extMap'</span>).get(<span class="string">'skuId'</span>)</span><br><span class="line">            prod_introduceInfo=text</span><br><span class="line">            print(<span class="string">'-------prod_skuId-------:+++'</span>,prod_skuId)</span><br><span class="line">            print(prod_skuId, prod_introduceInfo)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 获取金榜列表</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">getMainGoldRank</span><span class="params">(json_data)</span>:</span></span><br><span class="line">    tabs = json_data[<span class="string">'result'</span>][<span class="string">'tabs'</span>]</span><br><span class="line">    <span class="keyword">for</span> tab <span class="keyword">in</span> tabs:</span><br><span class="line">        tabName = tab[<span class="string">'tabName'</span>]  <span class="comment"># 榜单名称</span></span><br><span class="line">        tabData = tab[<span class="string">'data'</span>]  <span class="comment"># 榜单数据</span></span><br><span class="line">        print(type(tabData))</span><br><span class="line">        <span class="keyword">if</span> type(tabData) <span class="keyword">is</span> list:</span><br><span class="line">            <span class="keyword">for</span> rankdata <span class="keyword">in</span> tabData:</span><br><span class="line">                rankId = rankdata[<span class="string">'id'</span>]</span><br><span class="line">                rankTitle = rankdata[<span class="string">'name'</span>]</span><br><span class="line">                rankType = rankdata[<span class="string">'rankType'</span>]</span><br><span class="line">                skuId=<span class="literal">None</span></span><br><span class="line">                print(tabName, rankId, rankType, rankTitle, skuId)</span><br><span class="line">        <span class="keyword">if</span> type(tabData) <span class="keyword">is</span> dict:</span><br><span class="line">            relatedAdvIds = tab[<span class="string">'relatedAdvIds'</span>]</span><br><span class="line">            <span class="keyword">if</span> type(relatedAdvIds) <span class="keyword">is</span> list:</span><br><span class="line">                <span class="keyword">for</span> relatedAdvId <span class="keyword">in</span> relatedAdvIds:</span><br><span class="line">                    rankList = tabData[relatedAdvId][<span class="string">'rankList'</span>]</span><br><span class="line">                    <span class="keyword">for</span> rankdata <span class="keyword">in</span> rankList:</span><br><span class="line">                        rankId = rankdata[<span class="string">'rankId'</span>]</span><br><span class="line">                        rankTitle = rankdata[<span class="string">'rankType'</span>]</span><br><span class="line">                        rankType = rankdata[<span class="string">'rankTitle'</span>]</span><br><span class="line">                        skuId = rankdata[<span class="string">'skuId'</span>]</span><br><span class="line">                        print(tabName, rankId, rankType, rankTitle, skuId)</span><br><span class="line"></span><br><span class="line"><span class="comment">#获取JD金榜商品概要信息</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">getJDProductInfo</span><span class="params">(json_data)</span>:</span></span><br><span class="line">    <span class="comment">#if ('result' in json_data) and ('mainRank' in json_data['result']):</span></span><br><span class="line">    print(json_data)</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        products=json_data[<span class="string">'result'</span>][<span class="string">'mainRank'</span>][<span class="string">'products'</span>]</span><br><span class="line">        prod_main_rank=json_data[<span class="string">'result'</span>][<span class="string">'mainRank'</span>]</span><br><span class="line">        prod_rankId=prod_main_rank.get(<span class="string">'id'</span>)</span><br><span class="line">        <span class="comment">#判断如果没有在main_gold_rank表中则添加记录至main_gold_rank表</span></span><br><span class="line">        rankTitle=prod_main_rank.get(<span class="string">'name'</span>)</span><br><span class="line">        print(<span class="string">''</span>, prod_rankId,rankTitle , <span class="number">13</span>, <span class="string">''</span>)</span><br><span class="line">        <span class="keyword">for</span> product <span class="keyword">in</span> products:</span><br><span class="line">            prod_skuId = product[<span class="string">'product'</span>][<span class="string">'skuId'</span>]</span><br><span class="line">            prod_name = product[<span class="string">'product'</span>][<span class="string">'name'</span>]</span><br><span class="line">            prod_img = product[<span class="string">'product'</span>][<span class="string">'img'</span>]</span><br><span class="line">            prod_skuSallingPoint = product.get(<span class="string">'skuSallingPoint'</span>)</span><br><span class="line">            prod_saleInfoStr = product.get(<span class="string">'saleInfoStr'</span>)</span><br><span class="line">            prod_simpleSaleInfoStr = product.get(<span class="string">'simpleSaleInfoStr'</span>)</span><br><span class="line">            prod_totalBuyInfoStr = product.get(<span class="string">'totalBuyInfoStr'</span>)</span><br><span class="line">            prod_goodCountStr = product.get(<span class="string">'goodCountStr'</span>)</span><br><span class="line">            prod_simpleGoodCountStr = product.get(<span class="string">'simpleGoodCountStr'</span>)</span><br><span class="line">            prod_totalPopularity = product.get(<span class="string">'totalPopularity'</span>)</span><br><span class="line">            prod_popularityStr = product.get(<span class="string">'popularityStr'</span>)</span><br><span class="line">            prod_cmttTag = product.get(<span class="string">'cmttTag'</span>)</span><br><span class="line">            prod_longTitle = product.get(<span class="string">'longTitle'</span>)</span><br><span class="line">            prod_authorityScore = product.get(<span class="string">'authorityScore'</span>)</span><br><span class="line">            prod_saleScore = product.get(<span class="string">'saleScore'</span>)</span><br><span class="line">            prod_popularityScore = product.get(<span class="string">'popularityScore'</span>)</span><br><span class="line">            prod_growthScore = product.get(<span class="string">'growthScore'</span>)</span><br><span class="line">            prod_praiseScore = product.get(<span class="string">'praiseScore'</span>)</span><br><span class="line">            prod_brandScore = product.get(<span class="string">'brandScore'</span>)</span><br><span class="line">            prod_brandStr = product.get(<span class="string">'brandStr'</span>)</span><br><span class="line">            prod_growthStr = product.get(<span class="string">'growthStr'</span>)</span><br><span class="line">            prod_sortedSaleIfoStr = product.get(<span class="string">'sortedSaleIfoStr'</span>)</span><br><span class="line">            prod_rankNum = product.get(<span class="string">'rankNum'</span>)</span><br><span class="line">            print(prod_rankId,prod_skuId,prod_name,prod_img,prod_skuSallingPoint,prod_saleInfoStr,prod_simpleSaleInfoStr,prod_totalBuyInfoStr,</span><br><span class="line">            prod_goodCountStr,prod_simpleGoodCountStr,prod_totalPopularity,prod_popularityStr,prod_cmttTag,prod_longTitle,</span><br><span class="line">            prod_authorityScore,prod_saleScore,prod_popularityScore,prod_growthScore,prod_praiseScore,prod_brandScore,prod_brandStr,prod_growthStr,prod_sortedSaleIfoStr,prod_rankNum)</span><br><span class="line">    <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">        print(<span class="string">'getJDProductInfo Error:'</span>, e)</span><br></pre></td></tr></table></figure>

<p>通过运行  <code>mitmdump -s jdrank_scripts.py</code><br>用浏览器访问京东H5的小程序<a href="https://h5.m.jd.com/babelDiy/Zeus/32xRoXWmepbBVHfDMoHMw2kGfHdF/index.html" target="_blank" rel="noopener">https://h5.m.jd.com/babelDiy/Zeus/32xRoXWmepbBVHfDMoHMw2kGfHdF/index.html</a><br>从H5的小程序访问获取京东金榜的排行数据<br><img src="https://xiejava1018.github.io/xiejavaimagesrc/images/2024/20240304/14-%E8%8E%B7%E5%8F%96%E9%87%91%E6%A6%9C%E6%8E%92%E8%A1%8C.png" alt="获取京东金榜排行"></p>
<p>获取京东金榜商品信息<br><img src="https://xiejava1018.github.io/xiejavaimagesrc/images/2024/20240304/15-%E8%8E%B7%E5%8F%96%E9%87%91%E6%A6%9C%E5%95%86%E5%93%81%E5%88%97%E8%A1%A8.png" alt="获取京东金榜商品信息"></p>
<p><strong>从京东APP上访问京东金榜也是同样的效果。</strong> </p>
<p>至此，本文从环境准备到数据分析到代码实现，通过mitmdump爬取京东金榜排行数据进行mitmproxy爬取数据的实战。</p>
<hr>
<p>作者博客：<a href="http://xiejava.ishareread.com/" target="_blank" rel="noopener">http://xiejava.ishareread.com/</a></p>
<center> 

<br>

<p><img src="https://xiejava1018.github.io/xiejavaimagesrc/images/fullbug%E5%BE%AE%E4%BF%A1%E5%85%AC%E4%BC%97%E5%8F%B7.jpg" alt="“fullbug”微信公众号" title="“fullbug”微信公众号"> </p>
<p>关注：微信公众号,一起学习成长！</center></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://xiejava.ishareread.com/posts/699b1506/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="XieJava">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="https://img9.doubanio.com/icon/ul70489051-4.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="XieJava's blog">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/posts/699b1506/" itemprop="url">mitmproxy安装与配置</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2024-02-29T18:33:41+08:00">
                2024-02-29
              </time>
            

            
              <span class="post-meta-divider">|</span>
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-check-o"></i>
              </span>
              
                <span class="post-meta-item-text">更新于&#58;</span>
              
              <time title="更新于" itemprop="dateModified" datetime="2024-06-13T22:52:38+08:00">
                2024-06-13
              </time>
            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E6%8A%80%E6%9C%AF/" itemprop="url" rel="index">
                    <span itemprop="name">技术</span>
                  </a>
                </span>

                
                
                  ， 
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E6%8A%80%E6%9C%AF/%E5%BC%80%E5%8F%91/" itemprop="url" rel="index">
                    <span itemprop="name">开发</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/posts/699b1506/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count valine-comment-count" data-xid="/posts/699b1506/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          
             <span id="/posts/699b1506/" class="leancloud_visitors" data-flag-title="mitmproxy安装与配置">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">阅读次数&#58;</span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  1.1k
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">
                  3
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>mitmproxy是一个免费的开源交互式的HTTPS代理工具。它类似于其他抓包工具如WireShark和Fiddler，支持抓取HTTP和HTTPS协议的数据包，并可以通过控制台形式进行操作。mitmproxy具有两个非常有用的组件：mitmdump和mitmweb。mitmdump是mitmproxy的命令行接口，可以直接抓取请求数据，而mitmweb是一个web程序，可以清楚地观察mitmproxy抓取的请求数据。</p>
<p>此外，mitmproxy的特点之一是它支持Python自定义脚本，这使得mitmproxy的使用更加灵活和强大。通过安装mitmproxy，用户可以实时查看、记录、修改数据，引发服务端或客户端的特定行为。mitmproxy是一个功能强大的抓包工具，具有广泛的应用场景，如网络调试、安全测试、数据分析等。</p>
<p>本文介绍mitmproxy的安装与配置，通过mitmproxy代理进行抓包。</p>
<h2 id="一、mitmproxy的安装"><a href="#一、mitmproxy的安装" class="headerlink" title="一、mitmproxy的安装"></a>一、mitmproxy的安装</h2><p>首先需要安装好python，版本需要不低于3.6，且安装了附带了包管理工具pip<br>在命令行中输入<code>pip install mitmproxy</code>，等待安装完成。<br>安装完成后，系统将拥有mitmproxy、mitmdump、mitmweb三个命令，可以通过<code>mitmdump</code>检查一下mitmproxy是否安装成功了。<br><img src="https://xiejava1018.github.io/xiejavaimagesrc/images/2024/20240229/1-%E6%9F%A5%E7%9C%8Bmitmproxy%E7%89%88%E6%9C%AC.png" alt="查看mitmproxy版本"></p>
<h2 id="二、运行mitmproxy"><a href="#二、运行mitmproxy" class="headerlink" title="二、运行mitmproxy"></a>二、运行mitmproxy</h2><p>要启动 mitmproxy 用 mitmproxy、mitmdump、mitmweb 这三个命令中的任意一个即可，这三个命令功能一致，且都可以加载自定义脚本，唯一的区别是交互界面的不同。</p>
<p>启动mitmproxy后，客户端要配置指定通过mitmproxy代理来访问目标网站的服务资源。<br><img src="https://xiejava1018.github.io/xiejavaimagesrc/images/2024/20240229/2-how-mitmproxy-works-explicit.png" alt="mitmproxy代理工作原理"></p>
<h3 id="1、配置客户端代理"><a href="#1、配置客户端代理" class="headerlink" title="1、配置客户端代理"></a>1、配置客户端代理</h3><p>运行mitmproxy默认代理的端口是8080，所以要配置浏览器通过mitmproxy代理来访问目标网站。</p>
<h4 id="方式一，设置全局代理"><a href="#方式一，设置全局代理" class="headerlink" title="方式一，设置全局代理"></a>方式一，设置全局代理</h4><p>设置全局代理，在window中找到网络和Internet，点击手动设置代理，将使用代理服务器的开关打开，设置代理IP地址为127.0.0.1，端口为8080<br><img src="https://xiejava1018.github.io/xiejavaimagesrc/images/2024/20240229/3-windows%E8%AE%BE%E7%BD%AE%E7%BD%91%E7%BB%9C%E4%BB%A3%E7%90%86.png" alt="设置全局代理"></p>
<h4 id="方式二，设置浏览器代理"><a href="#方式二，设置浏览器代理" class="headerlink" title="方式二，设置浏览器代理"></a>方式二，设置浏览器代理</h4><p>通过浏览器插件设置浏览器代理，如chrome浏览器可以通过SwitchyOmega插件设置代理<br><img src="https://xiejava1018.github.io/xiejavaimagesrc/images/2024/20240229/4-SwitchyOmega%E6%8F%92%E4%BB%B6%E8%AE%BE%E7%BD%AE%E4%BB%A3%E7%90%86.png" alt="通过SwitchyOmega插件设置代理"></p>
<p>通过mitmproxy命令启动mitmproxy后通过设置代理后的浏览器访问<a href="http://xiejava.ishareread.com，可以看到通过mitmproxy代理后的访问流量日志。" target="_blank" rel="noopener">http://xiejava.ishareread.com，可以看到通过mitmproxy代理后的访问流量日志。</a><br><img src="https://xiejava1018.github.io/xiejavaimagesrc/images/2024/20240229/5-%E8%AE%BF%E9%97%AEhttp%E7%9A%84%E7%BD%91%E7%AB%99.png" alt="http抓包日志情况"></p>
<h3 id="2、客户端安装mitmproxy提供的CA证书"><a href="#2、客户端安装mitmproxy提供的CA证书" class="headerlink" title="2、客户端安装mitmproxy提供的CA证书"></a>2、客户端安装mitmproxy提供的CA证书</h3><p>对于访问https加密的网站需要证书才能解密，所以客户端需要安装mitmproxy提供的CA证书。<br>通过mitmporxy代理浏览器访问<a href="http://mitm.it/将显示mitmproxy证书下载和安装指导页面" target="_blank" rel="noopener">http://mitm.it/将显示mitmproxy证书下载和安装指导页面</a><br><img src="https://xiejava1018.github.io/xiejavaimagesrc/images/2024/20240229/6-mitmproxy%E8%AF%81%E4%B9%A6%E4%B8%8B%E8%BD%BD%E5%AE%89%E8%A3%85%E9%A1%B5%E9%9D%A2.png" alt="mitmproxy证书下载和安装指导页面"></p>
<p>可以看到mitmproxy提供了各种操作系统的CA证书，点击”Show Instructions”,将显示证书的安装指导，可以根据指导一步步安装成功。<br><img src="https://xiejava1018.github.io/xiejavaimagesrc/images/2024/20240229/7-mitmproxy%E8%AF%81%E4%B9%A6%E5%AE%89%E8%A3%85%E6%AD%A5%E9%AA%A4%E4%BB%8B%E7%BB%8D.png" alt="证书的安装指导"></p>
<p>对于Windows系统：</p>
<h4 id="手工安装步骤："><a href="#手工安装步骤：" class="headerlink" title="手工安装步骤："></a>手工安装步骤：</h4><ol>
<li>双击mitmproxy提供的CA证书文件（通常是mitmproxy-ca.p12）。</li>
<li>在出现的导入证书引导页中，直接点击“下一步”按钮。</li>
<li>接下来会出现密码设置提示，这里不需要设置密码，直接点击“下一步”按钮。</li>
<li>选择证书的存储区域。通常选择“将所有的证书都放入下列存储”，然后点击“浏览”按钮，选择证书存储位置为“受信任的根证书颁发机构”，接着点击“确定”按钮。</li>
<li>点击“下一步”按钮完成证书的导入。</li>
<li>如果有安全警告弹出，直接点击“是”按钮即可。</li>
</ol>
<h4 id="自动安装步骤："><a href="#自动安装步骤：" class="headerlink" title="自动安装步骤："></a>自动安装步骤：</h4><p>在window中用管理员权限运行PowerShell，在命令行控制台，进去到证书的目录，一般是在c:\Users\yourname.mitmproxy目录下。执行 <code>certutil.exe -addstore root mitmproxy-ca-cert.cer</code> 如下图所示。<br><img src="https://xiejava1018.github.io/xiejavaimagesrc/images/2024/20240229/8-%E8%87%AA%E5%8A%A8%E5%AE%89%E8%A3%85%E8%AF%81%E4%B9%A6%E6%93%8D%E4%BD%9C.png" alt="自动安装证书步骤"></p>
<p>安装好证书后，通过mitmproxy代理，我们来访问https协议的网站<a href="https://www.taobao.com。可以在后台看到mitmproxy抓取的https流量日志" target="_blank" rel="noopener">https://www.taobao.com。可以在后台看到mitmproxy抓取的https流量日志</a><br><img src="https://xiejava1018.github.io/xiejavaimagesrc/images/2024/20240229/9-%E6%8A%93%E5%8F%96https%E7%BD%91%E7%AB%99%E6%B5%81%E9%87%8F.png" alt="mitmproxy抓取的https流量日志"></p>
<p>至此，我们成功安装了mitmproxy,并配置了相应的CA证书，通过mitmporxy代理能够获取访问http和https网站的流量数据。后续我们将通过一个实例来进行mitmproxy抓包爬取京东APP的金榜排行的数据信息。</p>
<hr>
<p>作者博客：<a href="http://xiejava.ishareread.com/" target="_blank" rel="noopener">http://xiejava.ishareread.com/</a></p>
<center> 

<br>

<p><img src="https://xiejava1018.github.io/xiejavaimagesrc/images/fullbug%E5%BE%AE%E4%BF%A1%E5%85%AC%E4%BC%97%E5%8F%B7.jpg" alt="“fullbug”微信公众号" title="“fullbug”微信公众号"> </p>
<p>关注：微信公众号,一起学习成长！</center></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://xiejava.ishareread.com/posts/6e762a1a/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="XieJava">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="https://img9.doubanio.com/icon/ul70489051-4.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="XieJava's blog">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/posts/6e762a1a/" itemprop="url">Selenium实战-模拟登录淘宝并爬取商品信息</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2024-02-26T14:07:55+08:00">
                2024-02-26
              </time>
            

            
              <span class="post-meta-divider">|</span>
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-check-o"></i>
              </span>
              
                <span class="post-meta-item-text">更新于&#58;</span>
              
              <time title="更新于" itemprop="dateModified" datetime="2024-06-13T22:52:38+08:00">
                2024-06-13
              </time>
            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E6%8A%80%E6%9C%AF/" itemprop="url" rel="index">
                    <span itemprop="name">技术</span>
                  </a>
                </span>

                
                
                  ， 
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E6%8A%80%E6%9C%AF/%E5%BC%80%E5%8F%91/" itemprop="url" rel="index">
                    <span itemprop="name">开发</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/posts/6e762a1a/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count valine-comment-count" data-xid="/posts/6e762a1a/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          
             <span id="/posts/6e762a1a/" class="leancloud_visitors" data-flag-title="Selenium实战-模拟登录淘宝并爬取商品信息">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">阅读次数&#58;</span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  2.3k
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">
                  10
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>现在很多网站要获取数据都得要先登录。Selenium是一个用于Web应用程序测试的自动化工具。它直接运行在浏览器中，模拟真实用户的操作。本文介绍如何通过Selenium来登录淘宝并自动爬取商品信息。<br>关于Selenium的安装与配置请参考博文《<a href="http://xiejava.ishareread.com/posts/8370b2b6/" target="_blank" rel="noopener">Selenium安装与配置</a>》</p>
<h2 id="一、通过Selenium模拟登录淘宝"><a href="#一、通过Selenium模拟登录淘宝" class="headerlink" title="一、通过Selenium模拟登录淘宝"></a>一、通过Selenium模拟登录淘宝</h2><p>现在要获取淘宝的商品信息需要先登录淘宝。我们先来分析淘宝的登录页面。</p>
<h3 id="1、分析淘宝登录页面"><a href="#1、分析淘宝登录页面" class="headerlink" title="1、分析淘宝登录页面"></a>1、分析淘宝登录页面</h3><p>淘宝登录页面为<a href="https://login.taobao.com/member/login.jhtml，支持扫描登录和用户名、密码验证登录。我们模拟用户名、密码登录。" target="_blank" rel="noopener">https://login.taobao.com/member/login.jhtml，支持扫描登录和用户名、密码验证登录。我们模拟用户名、密码登录。</a><br>通过Chrome浏览器输入淘宝登录页面链接F12打开开发者工具，分析淘宝登录页的源代码，找到登录账号、登录密码和登录按钮的相关控件的源代码<br><img src="https://xiejava1018.github.io/xiejavaimagesrc/images/2024/20240226/1-%E6%B7%98%E5%AE%9D%E7%99%BB%E5%BD%95%E7%95%8C%E9%9D%A2%E5%88%86%E6%9E%90.png" alt="分析淘宝登录页面"></p>
<p>在这里可以看到<br>账号名的输入框控件代码:<code>&lt;input name=&quot;fm-login-id&quot; type=&quot;text&quot; class=&quot;fm-text&quot; id=&quot;fm-login-id&quot; tabindex=&quot;1&quot; aria-label=&quot;账号名/邮箱/手机号&quot; placeholder=&quot;账号名/邮箱/手机号&quot; autocapitalize=&quot;off&quot; data-spm-anchor-id=&quot;a2107.1.0.i1.3e3e11d9pGQKXf&quot;&gt;</code><br>登录密码的输入框控件代码：<code>&lt;input name=&quot;fm-login-password&quot; type=&quot;password&quot; class=&quot;fm-text&quot; id=&quot;fm-login-password&quot; tabindex=&quot;2&quot; aria-label=&quot;请输入登录密码&quot; placeholder=&quot;请输入登录密码&quot; maxlength=&quot;40&quot; autocapitalize=&quot;off&quot; data-spm-anchor-id=&quot;a2107.1.0.i2.3e3e11d9pGQKXf&quot;&gt;</code><br>登录按钮的控件代码：<code>&lt;button type=&quot;submit&quot; tabindex=&quot;3&quot; class=&quot;fm-button fm-submit password-login&quot; data-spm-anchor-id=&quot;a2107.1.0.i3.3e3e11d9pGQKXf&quot;&gt;登录&lt;/button&gt;</code><br>找到登录需要用的的这几个关键控件代码都就可以开始编码来控制这些控件进行模拟操作了。</p>
<h3 id="2、通过Selenium实现模拟登录代码"><a href="#2、通过Selenium实现模拟登录代码" class="headerlink" title="2、通过Selenium实现模拟登录代码"></a>2、通过Selenium实现模拟登录代码</h3><p>具体代码如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> selenium.webdriver <span class="keyword">import</span> Chrome</span><br><span class="line"><span class="keyword">from</span> selenium.webdriver.support.wait <span class="keyword">import</span> WebDriverWait</span><br><span class="line"><span class="keyword">from</span> selenium.webdriver.common.by <span class="keyword">import</span> By</span><br><span class="line"><span class="keyword">from</span> selenium.webdriver.support <span class="keyword">import</span> expected_conditions <span class="keyword">as</span> EC</span><br><span class="line"><span class="keyword">from</span> selenium.common <span class="keyword">import</span> TimeoutException</span><br><span class="line"></span><br><span class="line">driver=Chrome()</span><br><span class="line">wait = WebDriverWait(driver, <span class="number">10</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 模拟淘宝登录</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">login_taobao</span><span class="params">()</span>:</span></span><br><span class="line">    print(<span class="string">'开始登录...'</span>)</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        login_url=<span class="string">'https://login.taobao.com/member/login.jhtml'</span></span><br><span class="line">        driver.get(login_url)</span><br><span class="line">        input_login_id = wait.until(EC.presence_of_element_located((By.ID, <span class="string">'fm-login-id'</span>)))</span><br><span class="line">        input_login_password = wait.until(EC.presence_of_element_located((By.ID, <span class="string">'fm-login-password'</span>)))</span><br><span class="line">        input_login_id.send_keys(<span class="string">'your account'</span>) <span class="comment"># 用你自己的淘宝账号替换</span></span><br><span class="line">        input_login_password.send_keys(<span class="string">'your password'</span>) <span class="comment"># 用你自己的密码替换</span></span><br><span class="line">        submit = wait.until(EC.element_to_be_clickable((By.CSS_SELECTOR, <span class="string">'.fm-button.fm-submit.password-login'</span>)))</span><br><span class="line">        submit.click()</span><br><span class="line">        is_loging = wait.until(EC.url_changes(login_url))</span><br><span class="line">        <span class="keyword">return</span> is_loging</span><br><span class="line">    <span class="keyword">except</span> TimeoutException:</span><br><span class="line">        print(<span class="string">'login_taobao TimeoutException'</span>)</span><br><span class="line">        submit = wait.until(EC.element_to_be_clickable((By.CSS_SELECTOR, <span class="string">'.fm-button.fm-submit'</span>)))</span><br><span class="line">        submit.click()</span><br><span class="line">        is_loging = wait.until(EC.url_changes(login_url))</span><br><span class="line">        <span class="keyword">if</span> is_loging:</span><br><span class="line">            <span class="keyword">return</span> is_loging</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            login_taobao()</span><br><span class="line">            </span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    is_loging=login_taobao()</span><br><span class="line">    <span class="keyword">if</span> is_loging:</span><br><span class="line">        print(<span class="string">'已经登录'</span>)</span><br></pre></td></tr></table></figure>


<p>运行代码后可以看到程序自动的调起了一个Chrome浏览器并访问了淘宝的登录页面，自动的输入了用户淘宝账号和密码，自动的点击了登录按钮，但出现了一个滑动验证的控件，要求滑动验证。<br><img src="https://xiejava1018.github.io/xiejavaimagesrc/images/2024/20240226/2-%E6%B7%98%E5%AE%9D%E7%99%BB%E5%BD%95%E9%9C%80%E8%A6%81%E6%BB%91%E5%8A%A8%E9%AA%8C%E8%AF%81.png" alt="淘宝登录需要滑动验证"></p>
<p>人工拖动滑动验证控件，显示验证失败。<br><img src="https://xiejava1018.github.io/xiejavaimagesrc/images/2024/20240226/3-%E6%B7%98%E5%AE%9D%E7%99%BB%E5%BD%95%E6%BB%91%E5%8A%A8%E9%AA%8C%E8%AF%81%E5%A4%B1%E8%B4%A5.png" alt="淘宝滑动验证失败"></p>
<p>这是因为淘宝有一套反爬机制识别是否是机器自动在登录。如果是人工打开浏览器，手工输入账号密码登录就不会弹出滑动验证控件进行验证。在网上有很多办法，如可以通过代理修改chormdriver的识别码，这里介绍通过Selenium如何接管已经运行的Chrome浏览器来实现规避淘宝的验证。</p>
<h3 id="3、Selenium接管已经运行的Chrome浏览器"><a href="#3、Selenium接管已经运行的Chrome浏览器" class="headerlink" title="3、Selenium接管已经运行的Chrome浏览器"></a>3、Selenium接管已经运行的Chrome浏览器</h3><h4 id="1）启动Chrome的远程调试模式"><a href="#1）启动Chrome的远程调试模式" class="headerlink" title="1）启动Chrome的远程调试模式"></a>1）启动Chrome的远程调试模式</h4><p>通过<br><code>chrome.exe --remote-debugging-port=9222 --user-data-dir=&#39;某个存在的文件夹地址&#39;</code>  启动Chrome的远程调试模式，启动一个Chrome浏览器。<br>找到chrome的安装目录，找到chrome.exe ，通过cmd命令行执行上面的命令。<br><img src="https://xiejava1018.github.io/xiejavaimagesrc/images/2024/20240226/4-%E9%80%9A%E8%BF%87%E8%BF%9C%E7%A8%8B%E8%B0%83%E8%AF%95%E6%A8%A1%E5%BC%8F%E5%90%AF%E5%8A%A8Chrome%E6%B5%8F%E8%A7%88%E5%99%A8.png" alt="启动Chrome远程调试模式"></p>
<p>运行上面命令后，就会弹出一个chrome浏览器，这个浏览器是可以被Selenium来接管操作的。</p>
<h4 id="2）代码中实现接管已经运行的Chrome浏览器"><a href="#2）代码中实现接管已经运行的Chrome浏览器" class="headerlink" title="2）代码中实现接管已经运行的Chrome浏览器"></a>2）代码中实现接管已经运行的Chrome浏览器</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> selenium.webdriver <span class="keyword">import</span> Chrome</span><br><span class="line"><span class="keyword">from</span> selenium.webdriver.chrome.options <span class="keyword">import</span> Options</span><br><span class="line"><span class="keyword">from</span> selenium.webdriver.support.wait <span class="keyword">import</span> WebDriverWait</span><br><span class="line"><span class="keyword">from</span> selenium.webdriver.common.by <span class="keyword">import</span> By</span><br><span class="line"><span class="keyword">from</span> selenium.webdriver.support <span class="keyword">import</span> expected_conditions <span class="keyword">as</span> EC</span><br><span class="line"><span class="keyword">from</span> selenium.common <span class="keyword">import</span> TimeoutException</span><br><span class="line"></span><br><span class="line">chrome_options = Options()</span><br><span class="line">chrome_options.add_experimental_option(<span class="string">"debuggerAddress"</span>, <span class="string">"localhost:9222"</span>) <span class="comment">#此处端口保持和命令行启动的端口一致</span></span><br><span class="line">driver = Chrome(options=chrome_options)</span><br><span class="line">wait = WebDriverWait(driver, <span class="number">10</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 模拟淘宝登录</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">login_taobao</span><span class="params">()</span>:</span></span><br><span class="line">    print(<span class="string">'开始登录...'</span>)</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        login_url=<span class="string">'https://login.taobao.com/member/login.jhtml'</span></span><br><span class="line">        driver.get(login_url)</span><br><span class="line">        input_login_id = wait.until(EC.presence_of_element_located((By.ID, <span class="string">'fm-login-id'</span>)))</span><br><span class="line">        input_login_password = wait.until(EC.presence_of_element_located((By.ID, <span class="string">'fm-login-password'</span>)))</span><br><span class="line">        input_login_id.send_keys(<span class="string">'your account'</span>) <span class="comment"># 用你自己的淘宝账号替换</span></span><br><span class="line">        input_login_password.send_keys(<span class="string">'your password'</span>) <span class="comment"># 用你自己的密码替换</span></span><br><span class="line">        submit = wait.until(EC.element_to_be_clickable((By.CSS_SELECTOR, <span class="string">'.fm-button.fm-submit.password-login'</span>)))</span><br><span class="line">        submit.click()</span><br><span class="line">        is_loging = wait.until(EC.url_changes(login_url))</span><br><span class="line">        <span class="keyword">return</span> is_loging</span><br><span class="line">    <span class="keyword">except</span> TimeoutException:</span><br><span class="line">        print(<span class="string">'login_taobao TimeoutException'</span>)</span><br><span class="line">        submit = wait.until(EC.element_to_be_clickable((By.CSS_SELECTOR, <span class="string">'.fm-button.fm-submit'</span>)))</span><br><span class="line">        submit.click()</span><br><span class="line">        is_loging = wait.until(EC.url_changes(login_url))</span><br><span class="line">        <span class="keyword">if</span> is_loging:</span><br><span class="line">            <span class="keyword">return</span> is_loging</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            login_taobao()</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    is_loging=login_taobao()</span><br><span class="line">    <span class="keyword">if</span> is_loging:</span><br><span class="line">        print(<span class="string">'已经登录'</span>)</span><br></pre></td></tr></table></figure>

<h3 id="4、运行效果"><a href="#4、运行效果" class="headerlink" title="4、运行效果"></a>4、运行效果</h3><p>运行上述代码就可以看到，Selenium接管了这个通过Chrome的远程调试模式启动的浏览器，并自动输入用户名和密码，自动登录成功，跳转到我的淘宝界面。<br><img src="https://xiejava1018.github.io/xiejavaimagesrc/images/2024/20240226/5-%E7%99%BB%E5%BD%95%E6%88%90%E5%8A%9F%E5%88%B0%E6%88%91%E7%9A%84%E6%B7%98%E5%AE%9D.png" alt="自动登录到我的淘宝"></p>
<h2 id="二、通过Selenium自动爬取淘宝商品信息"><a href="#二、通过Selenium自动爬取淘宝商品信息" class="headerlink" title="二、通过Selenium自动爬取淘宝商品信息"></a>二、通过Selenium自动爬取淘宝商品信息</h2><h3 id="1、分析商品页面"><a href="#1、分析商品页面" class="headerlink" title="1、分析商品页面"></a>1、分析商品页面</h3><p><a href="https://s.taobao.com/search?page=1&amp;q=ipad&amp;tab=all" target="_blank" rel="noopener">https://s.taobao.com/search?page=1&amp;q=ipad&amp;tab=all</a><br>通过Chrome浏览器输入淘宝搜索商品页面链接F12打开开发者工具，分析淘宝搜索商品列表页的源代码，找到商品展示相关源代码包括商品的title、价格、详情页、购买情况等。我们需要通过解析这些源代码获取相应的商品信息。<br><img src="https://xiejava1018.github.io/xiejavaimagesrc/images/2024/20240226/6-%E5%88%86%E6%9E%90%E6%B7%98%E5%AE%9D%E5%88%97%E8%A1%A8%E9%A1%B5.png" alt="分析商品页面"></p>
<p>找到下一页翻页的按钮，我们需要控制下一页翻页的按钮来实现自动翻页。<br><img src="https://xiejava1018.github.io/xiejavaimagesrc/images/2024/20240226/7-%E5%88%86%E6%9E%90%E6%B7%98%E5%AE%9D%E4%B8%8B%E4%B8%80%E9%A1%B5%E6%8C%89%E9%92%AE.png" alt="分析淘宝下一页"></p>
<h3 id="2、实现商品获取代码"><a href="#2、实现商品获取代码" class="headerlink" title="2、实现商品获取代码"></a>2、实现商品获取代码</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 解析获取商品信息</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_products</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="string">"""提取商品数据"""</span></span><br><span class="line">    html = driver.page_source</span><br><span class="line">    doc = pq(html)</span><br><span class="line">    items = doc(<span class="string">'.Card--doubleCardWrapper--L2XFE73'</span>).items()</span><br><span class="line">    <span class="keyword">for</span> item <span class="keyword">in</span> items:</span><br><span class="line">        product = &#123;<span class="string">'url'</span>: item.attr(<span class="string">'href'</span>),</span><br><span class="line">            <span class="string">'price'</span>: item.find(<span class="string">'.Price--priceInt--ZlsSi_M'</span>).text(),</span><br><span class="line">            <span class="string">'realsales'</span>: item.find(<span class="string">'.Price--realSales--FhTZc7U-cnt'</span>).text(),</span><br><span class="line">            <span class="string">'title'</span>: item.find(<span class="string">'.Title--title--jCOPvpf'</span>).text(),</span><br><span class="line">            <span class="string">'shop'</span>: item.find(<span class="string">'.ShopInfo--TextAndPic--yH0AZfx'</span>).text(),</span><br><span class="line">            <span class="string">'location'</span>: item.find(<span class="string">'.Price--procity--_7Vt3mX'</span>).text()&#125;</span><br><span class="line">        print(product)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 自动获取商品信息并自动翻页</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">index_page</span><span class="params">(url,cur_page,max_page)</span>:</span></span><br><span class="line">    print(<span class="string">' 正在爬取：'</span>+url)</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        driver.get(url)</span><br><span class="line">        get_products()</span><br><span class="line">        next_page_btn = wait.until(EC.element_to_be_clickable((By.XPATH, <span class="string">'//button/span[contains(text(),"下一页")]'</span>)))</span><br><span class="line">        next_page_btn.click()</span><br><span class="line">        do_change = wait.until(EC.url_changes(url))</span><br><span class="line">        <span class="keyword">if</span> do_change <span class="keyword">and</span> cur_page&lt;max_page:</span><br><span class="line">            new_url=driver.current_url</span><br><span class="line">            cur_page = cur_page + <span class="number">1</span></span><br><span class="line">            index_page(new_url,cur_page,max_page)</span><br><span class="line">    <span class="keyword">except</span> TimeoutException:</span><br><span class="line">        print(<span class="string">'---index_page TimeoutException---'</span>)</span><br></pre></td></tr></table></figure>

<h3 id="3、实现效果"><a href="#3、实现效果" class="headerlink" title="3、实现效果"></a>3、实现效果</h3><p>从浏览器看，Selenium自动访问淘宝登录页，当切到用户名密码登录界面时，Selenium自动输入用户名、密码点击登录。登录成功后，自动访问商品搜索页搜索ipad,进行商信息获取，自动翻下一页。<br>从后台打印的日志看，显示“开始登录”、“已经登录”，正在爬取的链接和该链接下的商品信息。<br><img src="https://xiejava1018.github.io/xiejavaimagesrc/images/2024/20240226/8-Selenium%E5%90%8E%E5%8F%B0%E6%97%A5%E5%BF%97.png" alt="Selenium后台日志"></p>
<p>至此，通过Selenium来代码实现模拟登录淘宝并自动爬取商品信息，进行了Selenium的实战。<br>要注意的是：</p>
<blockquote>
<p>1、在Selenium打开登录页面后淘宝默认的是扫码登录，需要人为接入切换用户密码模式。这时也可以让Selenium自动去切到用户密码模式登录。代码如下：<br>change_type=wait.until(EC.presence_of_element_located((By.CSS_SELECTOR, ‘.iconfont.icon-password’)))<br>change_type.click() #切换到用户密码模式登录<br>2、在运行启动Chrome的远程调试模式，启动Chrome浏览器后，要关闭其他的Chrome浏览器，保留远程调试模式启动的浏览器就好了。如果是存在多个Chrome浏览器Selenium会不知道要接管哪一个。</p>
</blockquote>
<h2 id="附上全部完整代码："><a href="#附上全部完整代码：" class="headerlink" title="附上全部完整代码："></a>附上全部完整代码：</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> selenium.webdriver <span class="keyword">import</span> Chrome</span><br><span class="line"><span class="keyword">from</span> selenium.webdriver.chrome.options <span class="keyword">import</span> Options</span><br><span class="line"><span class="keyword">from</span> selenium.webdriver.support.wait <span class="keyword">import</span> WebDriverWait</span><br><span class="line"><span class="keyword">from</span> selenium.webdriver.common.by <span class="keyword">import</span> By</span><br><span class="line"><span class="keyword">from</span> selenium.webdriver.support <span class="keyword">import</span> expected_conditions <span class="keyword">as</span> EC</span><br><span class="line"><span class="keyword">from</span> selenium.common <span class="keyword">import</span> TimeoutException</span><br><span class="line"><span class="keyword">from</span> urllib.parse <span class="keyword">import</span> quote</span><br><span class="line"><span class="keyword">from</span> pyquery <span class="keyword">import</span> PyQuery <span class="keyword">as</span> pq</span><br><span class="line"></span><br><span class="line">chrome_options = Options()</span><br><span class="line">chrome_options.add_experimental_option(<span class="string">"debuggerAddress"</span>, <span class="string">"localhost:9222"</span>) <span class="comment">#此处端口保持和命令行启动的端口一致</span></span><br><span class="line">driver = Chrome(options=chrome_options)</span><br><span class="line">wait = WebDriverWait(driver, <span class="number">10</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 模拟淘宝登录</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">login_taobao</span><span class="params">()</span>:</span></span><br><span class="line">    print(<span class="string">'开始登录...'</span>)</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        login_url=<span class="string">'https://login.taobao.com/member/login.jhtml'</span></span><br><span class="line">        driver.get(login_url)</span><br><span class="line">        change_type=wait.until(EC.presence_of_element_located((By.CSS_SELECTOR, <span class="string">'.iconfont.icon-password'</span>)))</span><br><span class="line">        change_type.click() <span class="comment">#切换到用户密码模式登录</span></span><br><span class="line">        input_login_id = wait.until(EC.presence_of_element_located((By.ID, <span class="string">'fm-login-id'</span>)))</span><br><span class="line">        input_login_password = wait.until(EC.presence_of_element_located((By.ID, <span class="string">'fm-login-password'</span>)))</span><br><span class="line">        input_login_id.send_keys(<span class="string">'your account'</span>) <span class="comment"># 用你自己的淘宝账号替换</span></span><br><span class="line">        input_login_password.send_keys(<span class="string">'your password'</span>) <span class="comment"># 用你自己的密码替换</span></span><br><span class="line">        submit = wait.until(EC.element_to_be_clickable((By.CSS_SELECTOR, <span class="string">'.fm-button.fm-submit.password-login'</span>)))</span><br><span class="line">        submit.click()</span><br><span class="line">        is_loging = wait.until(EC.url_changes(login_url))</span><br><span class="line">        <span class="keyword">return</span> is_loging</span><br><span class="line">    <span class="keyword">except</span> TimeoutException:</span><br><span class="line">        print(<span class="string">'login_taobao TimeoutException'</span>)</span><br><span class="line">        submit = wait.until(EC.element_to_be_clickable((By.CSS_SELECTOR, <span class="string">'.fm-button.fm-submit'</span>)))</span><br><span class="line">        submit.click()</span><br><span class="line">        is_loging = wait.until(EC.url_changes(login_url))</span><br><span class="line">        <span class="keyword">if</span> is_loging:</span><br><span class="line">            <span class="keyword">return</span> is_loging</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            login_taobao()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 解析获取商品信息</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_products</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="string">"""提取商品数据"""</span></span><br><span class="line">    html = driver.page_source</span><br><span class="line">    doc = pq(html)</span><br><span class="line">    items = doc(<span class="string">'.Card--doubleCardWrapper--L2XFE73'</span>).items()</span><br><span class="line">    <span class="keyword">for</span> item <span class="keyword">in</span> items:</span><br><span class="line">        product = &#123;<span class="string">'url'</span>: item.attr(<span class="string">'href'</span>),</span><br><span class="line">            <span class="string">'price'</span>: item.find(<span class="string">'.Price--priceInt--ZlsSi_M'</span>).text(),</span><br><span class="line">            <span class="string">'realsales'</span>: item.find(<span class="string">'.Price--realSales--FhTZc7U-cnt'</span>).text(),</span><br><span class="line">            <span class="string">'title'</span>: item.find(<span class="string">'.Title--title--jCOPvpf'</span>).text(),</span><br><span class="line">            <span class="string">'shop'</span>: item.find(<span class="string">'.ShopInfo--TextAndPic--yH0AZfx'</span>).text(),</span><br><span class="line">            <span class="string">'location'</span>: item.find(<span class="string">'.Price--procity--_7Vt3mX'</span>).text()&#125;</span><br><span class="line">        print(product)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 自动获取商品信息并自动翻页</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">index_page</span><span class="params">(url,cur_page,max_page)</span>:</span></span><br><span class="line">    print(<span class="string">' 正在爬取：'</span>+url)</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        driver.get(url)</span><br><span class="line">        get_products()</span><br><span class="line">        next_page_btn = wait.until(EC.element_to_be_clickable((By.XPATH, <span class="string">'//button/span[contains(text(),"下一页")]'</span>)))</span><br><span class="line">        next_page_btn.click()</span><br><span class="line">        do_change = wait.until(EC.url_changes(url))</span><br><span class="line">        <span class="keyword">if</span> do_change <span class="keyword">and</span> cur_page&lt;max_page:</span><br><span class="line">            new_url=driver.current_url</span><br><span class="line">            cur_page = cur_page + <span class="number">1</span></span><br><span class="line">            index_page(new_url,cur_page,max_page)</span><br><span class="line">    <span class="keyword">except</span> TimeoutException:</span><br><span class="line">        print(<span class="string">'---index_page TimeoutException---'</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    is_loging=login_taobao()</span><br><span class="line">    <span class="keyword">if</span> is_loging:</span><br><span class="line">        print(<span class="string">'已经登录'</span>)</span><br><span class="line">        KEYWORD = <span class="string">'iPad'</span></span><br><span class="line">        url = <span class="string">'https://s.taobao.com/search?page=1&amp;q='</span> + quote(KEYWORD) + <span class="string">'&amp;tab=all'</span></span><br><span class="line">        max_page=<span class="number">10</span></span><br><span class="line">        index_page(url,<span class="number">1</span>,max_page)</span><br></pre></td></tr></table></figure>

<hr>
<p>作者博客：<a href="http://xiejava.ishareread.com/" target="_blank" rel="noopener">http://xiejava.ishareread.com/</a></p>
<center> 

<br>

<p><img src="https://xiejava1018.github.io/xiejavaimagesrc/images/fullbug%E5%BE%AE%E4%BF%A1%E5%85%AC%E4%BC%97%E5%8F%B7.jpg" alt="“fullbug”微信公众号" title="“fullbug”微信公众号"> </p>
<p>关注：微信公众号,一起学习成长！</center></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/5/">&lt;</a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/5/">5</a><span class="page-number current">6</span><a class="page-number" href="/page/7/">7</a><span class="space">&hellip;</span><a class="page-number" href="/page/22/">22</a><a class="extend next" rel="next" href="/page/7/">&gt;</a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
      <div id="sidebar-dimmer"></div>
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image"
                src="https://img9.doubanio.com/icon/ul70489051-4.jpg"
                alt="XieJava" />
            
              <p class="site-author-name" itemprop="name">XieJava</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives">
              
                  <span class="site-state-item-count">217</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">11</span>
                  <span class="site-state-item-name">分类</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">27</span>
                  <span class="site-state-item-name">标签</span>
                </a>
              </div>
            

          </nav>

          
            <div class="feed-link motion-element">
              <a href="/atom.xml" rel="alternate">
                <i class="fa fa-rss"></i>
                RSS
              </a>
            </div>
          

          <div class="links-of-author motion-element">
            
              
                <span class="links-of-author-item">
                  <a href="https://github.com/xiejava1018" target="_blank" title="GitHub">
                    
                      <i class="fa fa-fw fa-github"></i>GitHub</a>
                </span>
              
            
          </div>

          
          

          
          
            <div class="links-of-blogroll motion-element links-of-blogroll-inline">
              <div class="links-of-blogroll-title">
                <i class="fa  fa-fw fa-link"></i>
                友情链接
              </div>
              <ul class="links-of-blogroll-list">
                
                  <li class="links-of-blogroll-item">
                    <a href="http://www.ishareread.com/" title="爱分享读书" target="_blank">爱分享读书</a>
                  </li>
                
                  <li class="links-of-blogroll-item">
                    <a href="https://blog.csdn.net/fullbug" title="CSDN" target="_blank">CSDN</a>
                  </li>
                
                  <li class="links-of-blogroll-item">
                    <a href="https://www.douban.com/people/xiejava/" title="豆瓣" target="_blank">豆瓣</a>
                  </li>
                
              </ul>
            </div>
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2025</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">XieJava</span>

  
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-area-chart"></i>
    </span>
    
      <span class="post-meta-item-text">Site words total count&#58;</span>
    
    <span title="Site words total count">438.2k</span>
  
  
<!--51la网站应用监控-->
<script src="https://sdk.51.la/perf/js-sdk-perf.min.js" crossorigin="anonymous"></script>
<script>
  new LingQue.Monitor().init({id:"JdyGwOQm8BurILgP"});
</script>
<!--51la网站访问统计-->
<script charset="UTF-8" id="LA_COLLECT" src="//sdk.51.la/js-sdk-pro.min.js"></script>
<script>LA.init({id: "JdyBT51UUKIm9A1e",ck: "JdyBT51UUKIm9A1e"})</script>
<br>
<script id="LA-DATA-WIDGET" crossorigin="anonymous" src="https://v6-widget.51.la/v6/JdyBT51UUKIm9A1e/quote.js?theme=0&f=12"></script>
<br>
<a target="_blank" title="51la网站统计" href="https://v6.51.la/land/JdyBT51UUKIm9A1e"><img src="https://sdk.51.la/icon/2-4.png"></a>
</div>






  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Muse</a></div>




        







  <div >
    <!-- 友盟代码 -->
    <script type="text/javascript">document.write(unescape("%3Cspan id='cnzz_stat_icon_1278575888'%3E%3C/span%3E%3Cscript src='https://v1.cnzz.com/z_stat.php%3Fid%3D1278575888%26online%3D1%26show%3Dline' type='text/javascript'%3E%3C/script%3E"));</script>
	<!-- 友盟代码 end -->
  </div>



        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
          <span id="scrollpercent"><span>0</span>%</span>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=6.3.0"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=6.3.0"></script>



  
  

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=6.3.0"></script>




  


  




	





  





  










  <script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
  <script src="//unpkg.com/valine/dist/Valine.min.js"></script>
  
  <script type="text/javascript">
    var GUEST = ['nick','mail','link'];
    var guest = 'nick,mail,link';
    guest = guest.split(',').filter(item=>{
      return GUEST.indexOf(item)>-1;
    });
    new Valine({
        el: '#comments' ,
        verify: true,
        notify: true,
        appId: 'LfKg3xroRwHlese1o0oSY2zx-gzGzoHsz',
        appKey: 'NXbIDcd2qs0UWvoi0MXdwbmW',
        placeholder: 'Just go go',
        avatar:'mm',
        guest_info:guest,
        pageSize:'10' || 10,
    });
  </script>



  





  

  
  <script src="https://cdn1.lncld.net/static/js/av-core-mini-0.6.4.js"></script>
  <script>AV.initialize("LfKg3xroRwHlese1o0oSY2zx-gzGzoHsz", "NXbIDcd2qs0UWvoi0MXdwbmW");</script>
  <script>
    function showTime(Counter) {
      var query = new AV.Query(Counter);
      var entries = [];
      var $visitors = $(".leancloud_visitors");

      $visitors.each(function () {
        entries.push( $(this).attr("id").trim() );
      });

      query.containedIn('url', entries);
      query.find()
        .done(function (results) {
          var COUNT_CONTAINER_REF = '.leancloud-visitors-count';

          if (results.length === 0) {
            $visitors.find(COUNT_CONTAINER_REF).text(0);
            return;
          }

          for (var i = 0; i < results.length; i++) {
            var item = results[i];
            var url = item.get('url');
            var time = item.get('time');
            var element = document.getElementById(url);

            $(element).find(COUNT_CONTAINER_REF).text(time);
          }
          for(var i = 0; i < entries.length; i++) {
            var url = entries[i];
            var element = document.getElementById(url);
            var countSpan = $(element).find(COUNT_CONTAINER_REF);
            if( countSpan.text() == '') {
              countSpan.text(0);
            }
          }
        })
        .fail(function (object, error) {
          console.log("Error: " + error.code + " " + error.message);
        });
    }

    function addCount(Counter) {
      var $visitors = $(".leancloud_visitors");
      var url = $visitors.attr('id').trim();
      var title = $visitors.attr('data-flag-title').trim();
      var query = new AV.Query(Counter);

      query.equalTo("url", url);
      query.find({
        success: function(results) {
          if (results.length > 0) {
            var counter = results[0];
            counter.fetchWhenSave(true);
            counter.increment("time");
            counter.save(null, {
              success: function(counter) {
                var $element = $(document.getElementById(url));
                $element.find('.leancloud-visitors-count').text(counter.get('time'));
              },
              error: function(counter, error) {
                console.log('Failed to save Visitor num, with error message: ' + error.message);
              }
            });
          } else {
            var newcounter = new Counter();
            /* Set ACL */
            var acl = new AV.ACL();
            acl.setPublicReadAccess(true);
            acl.setPublicWriteAccess(true);
            newcounter.setACL(acl);
            /* End Set ACL */
            newcounter.set("title", title);
            newcounter.set("url", url);
            newcounter.set("time", 1);
            newcounter.save(null, {
              success: function(newcounter) {
                var $element = $(document.getElementById(url));
                $element.find('.leancloud-visitors-count').text(newcounter.get('time'));
              },
              error: function(newcounter, error) {
                console.log('Failed to create');
              }
            });
          }
        },
        error: function(error) {
          console.log('Error:' + error.code + " " + error.message);
        }
      });
    }

    $(function() {
      var Counter = AV.Object.extend("Counter");
      if ($('.leancloud_visitors').length == 1) {
        addCount(Counter);
      } else if ($('.post-title-link').length > 1) {
        showTime(Counter);
      }
    });
  </script>



  

  

  
  

  

  
  <script type="text/javascript" src="/js/src/js.cookie.js?v=6.3.0"></script>
  <script type="text/javascript" src="/js/src/scroll-cookie.js?v=6.3.0"></script>


  


</body>
</html>
